<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√≥dulo 4 - Dificultades Comunes y Plan de 21 D√≠as</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .progress-bar {
            background: rgba(255, 255, 255, 0.2);
            height: 10px;
            border-radius: 5px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #4CAF50, #8BC34A);
            height: 100%;
            width: 0%;
            transition: width 0.8s ease;
            border-radius: 5px;
        }

        .progress-text {
            font-size: 0.9em;
            margin-top: 10px;
            opacity: 0.9;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
            margin-bottom: 30px;
        }

        .content {
            padding: 40px;
        }

        .intro-section {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
        }

        .intro-section h2 {
            margin-bottom: 15px;
            font-size: 1.8em;
        }

        .age-selector {
            background: linear-gradient(135deg, #00cec9 0%, #55a3ff 100%);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 40px;
            text-align: center;
            color: white;
        }

        .age-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .age-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .age-btn:hover,
        .age-btn.active {
            background: white;
            color: #00cec9;
            border-color: white;
            transform: scale(1.05);
        }

        .section-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            background: #f8f9fa;
            padding: 10px;
            border-radius: 15px;
            overflow-x: auto;
        }

        .tab-btn {
            background: transparent;
            border: none;
            padding: 15px 25px;
            border-radius: 10px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
            color: #666;
            font-weight: 500;
        }

        .tab-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .difficulty-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            border-left: 5px solid #667eea;
        }

        .difficulty-title {
            color: #667eea;
            font-size: 1.5em;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .difficulty-description {
            color: #666;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .strategies-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        .strategy-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            transition: transform 0.3s ease;
        }

        .strategy-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(102, 126, 234, 0.3);
        }

        .strategy-title {
            font-size: 1.3em;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .strategy-steps {
            list-style: none;
            padding: 0;
        }

        .strategy-steps li {
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
        }

        .strategy-steps li::before {
            content: "‚úì";
            position: absolute;
            left: 0;
            top: 8px;
            background: rgba(255, 255, 255, 0.2);
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8em;
        }

        .interactive-exercise {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .exercise-title {
            font-size: 1.3em;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .exercise-content {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
        }

        .interactive-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
            font-size: 0.9em;
        }

        .interactive-btn:hover,
        .interactive-btn.selected {
            background: white;
            color: #0984e3;
            transform: scale(1.05);
        }

        .example-box {
            background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #e17055;
        }

        .example-title {
            color: #d63031;
            font-weight: bold;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .example-content {
            color: #2d3436;
            line-height: 1.5;
        }

        .dialogue {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .dialogue .parent {
            color: #0984e3;
            font-weight: bold;
        }

        .dialogue .child {
            color: #e17055;
            font-weight: bold;
        }

        .calendar-container {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
            margin: 20px 0;
        }

        .calendar-header {
            text-align: center;
            font-weight: bold;
            color: #667eea;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: #f8f9fa;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            padding: 8px;
            border: 2px solid transparent;
        }

        .calendar-day:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .calendar-day.therapy-day {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .calendar-day.completed {
            background: linear-gradient(135deg, #00b894 0%, #00cec9 100%);
            color: white;
        }

        .calendar-day.current {
            border-color: #fd79a8;
            animation: pulse-border 2s infinite;
        }

        @keyframes pulse-border {
            0%, 100% { border-color: #fd79a8; }
            50% { border-color: #e84393; }
        }

        .day-number {
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 4px;
        }

        .day-activity {
            font-size: 0.65em;
            text-align: center;
            line-height: 1.1;
            opacity: 0.9;
        }

        .days-detail {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .day-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 5px solid #667eea;
        }

        .day-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        .day-card-number {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .day-title {
            color: #667eea;
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .day-preview {
            color: #666;
            font-size: 0.95em;
            line-height: 1.4;
            margin-bottom: 15px;
        }

        .day-objectives {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .day-objectives h4 {
            color: #667eea;
            margin-bottom: 8px;
            font-size: 0.9em;
        }

        .day-objectives ul {
            list-style: none;
            padding: 0;
        }

        .day-objectives li {
            padding: 3px 0;
            font-size: 0.85em;
            position: relative;
            padding-left: 15px;
        }

        .day-objectives li::before {
            content: "‚Ä¢";
            position: absolute;
            left: 0;
            color: #667eea;
        }

        .day-difficulty {
            background: linear-gradient(135deg, #fd79a8 0%, #e84393 100%);
            color: white;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 0.75em;
            display: inline-block;
            margin-bottom: 10px;
        }

        .sound-exercise {
            background: linear-gradient(135deg, #e17055 0%, #d63031 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
        }

        .sound-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s ease;
        }

        .sound-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }

        .breathing-exercise {
            background: linear-gradient(135deg, #81ecec 0%, #00cec9 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
        }

        .breathing-circle {
            width: 100px;
            height: 100px;
            border: 3px solid white;
            border-radius: 50%;
            margin: 20px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 4s ease-in-out;
            cursor: pointer;
        }

        .breathing-circle.inhale {
            transform: scale(1.5);
        }

        .breathing-circle.exhale {
            transform: scale(1);
        }

        .skills-checklist {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin: 15px 0;
        }

        .skill-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
        }

        .skill-checkbox {
            width: 20px;
            height: 20px;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 30px 40px;
            background: #f8f9fa;
            border-top: 1px solid #dee2e6;
        }

        .nav-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .nav-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .bonus-badge {
            background: linear-gradient(135deg, #fd79a8 0%, #e84393 100%);
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.8em;
            display: inline-block;
            margin-left: 10px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 15px;
            }

            .header, .content {
                padding: 20px;
            }

            h1 {
                font-size: 2em;
            }

            .age-buttons {
                flex-direction: column;
                align-items: center;
            }

            .age-btn {
                width: 100%;
                max-width: 300px;
            }

            .section-tabs {
                flex-direction: column;
                gap: 5px;
            }

            .strategies-grid,
            .days-detail {
                grid-template-columns: 1fr;
            }

            .calendar-grid {
                grid-template-columns: repeat(7, 1fr);
                gap: 5px;
            }
            
            .calendar-day {
                padding: 4px;
            }
            
            .day-number {
                font-size: 0.9em;
            }
            
            .day-activity {
                font-size: 0.5em;
            }

            .navigation {
                flex-direction: column;
                gap: 15px;
                padding: 20px;
            }

            .nav-btn {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="progress-text">Tu Progreso en el M√≥dulo 4</div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar"></div>
            </div>
            <div class="progress-text" id="progressText">
                0% completado ‚Ä¢ 0 de 4 secciones
            </div>
            
            <h1>üö® Dificultades Comunes y Soluciones</h1>
            <div class="subtitle">
                Identifica problemas + Plan terap√©utico de 21 d√≠as con actividades espec√≠ficas por edad
            </div>
        </div>

        <div class="content">
            <div class="intro-section">
                <h2>üéØ M√≥dulo Especializado en Dificultades</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 20px;">
                    <div>üîç Detectar se√±ales espec√≠ficas por edad</div>
                    <div>üó£Ô∏è Manejar tartamudez evolutiva</div>
                    <div>üî§ Corregir problemas de pronunciaci√≥n</div>
                    <div>‚ö° Acelerar desarrollo del lenguaje</div>
                    <div>üìÖ Plan terap√©utico de 21 d√≠as</div>
                    <div>üè† T√©cnicas para aplicar en casa</div>
                </div>
            </div>

            <div class="age-selector">
                <h3>üìå Personaliza para la edad de tu hijo</h3>
                <p>El contenido se adaptar√° autom√°ticamente con informaci√≥n espec√≠fica para cada edad:</p>
                <div class="age-buttons">
                    <button class="age-btn" data-age="3">üë∂ 3 a√±os</button>
                    <button class="age-btn" data-age="4">üë¶ 4 a√±os</button>
                    <button class="age-btn" data-age="5">üëß 5 a√±os</button>
                </div>
            </div>

            <div class="section-tabs">
                <button class="tab-btn active" data-tab="tartamudez">üó£Ô∏è Tartamudez</button>
                <button class="tab-btn" data-tab="pronunciacion">üî§ Pronunciaci√≥n</button>
                <button class="tab-btn" data-tab="retraso">‚ö° Retraso del Lenguaje</button>
                <button class="tab-btn" data-tab="plan21">üìÖ Plan 21 D√≠as</button>
            </div>

            <!-- SECCI√ìN TARTAMUDEZ -->
            <div class="tab-content active" id="tartamudez">
                <div class="difficulty-section">
                    <div class="difficulty-title">
                        <span>üó£Ô∏è</span>
                        <span id="tartamudez-title">Tartamudez: Selecciona la edad arriba</span>
                    </div>
                    <div class="difficulty-description" id="tartamudez-description">
                        Selecciona la edad de tu hijo arriba para ver informaci√≥n espec√≠fica sobre tartamudez.
                    </div>
                    
                    <div class="interactive-exercise">
                        <div class="exercise-title">
                            <span>üéØ</span>
                            <span>Simulador: ¬øC√≥mo Responder Correctamente?</span>
                        </div>
                        <div class="exercise-content" id="tartamudez-simulator">
                            <p><strong>SITUACI√ìN REAL:</strong> Tu hijo dice "Yo-yo-yo quiero ga-ga-galletas"</p>
                            <p>¬øCu√°l es la respuesta correcta?</p>
                            <button class="interactive-btn" onclick="checkTartamudezAnswer('wrong')">
                                "Respira hondo y habla m√°s despacio, amor"
                            </button>
                            <button class="interactive-btn" onclick="checkTartamudezAnswer('right')">
                                "Ah, quieres galletas. Vamos a buscarlas juntos"
                            </button>
                            <div id="tartamudez-feedback" style="margin-top: 15px; display: none;"></div>
                        </div>
                    </div>

                    <div class="breathing-exercise">
                        <div class="exercise-title">
                            <span>ü´Å</span>
                            <span>Ejercicio de Respiraci√≥n para Fluidez</span>
                        </div>
                        <p>Practica junto a tu hijo este ejercicio de respiraci√≥n para mejorar la fluidez:</p>
                        <div class="breathing-circle" id="breathingCircle" onclick="startBreathingExercise()">
                            <span id="breathingText">Iniciar</span>
                        </div>
                        <p style="font-size: 0.9em; opacity: 0.8;">Haz clic en el c√≠rculo para comenzar</p>
                    </div>

                    <div class="strategies-grid" id="tartamudez-strategies">
                        <div class="strategy-card">
                            <div class="strategy-title">
                                <span>‚ö†Ô∏è</span>
                                <span>Selecciona una edad</span>
                            </div>
                            <p>Usa los botones de edad arriba para ver estrategias espec√≠ficas para tartamudez.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SECCI√ìN PRONUNCIACI√ìN -->
            <div class="tab-content" id="pronunciacion">
                <div class="difficulty-section">
                    <div class="difficulty-title">
                        <span>üî§</span>
                        <span id="pronunciacion-title">Pronunciaci√≥n: Desarrollo por Edad</span>
                    </div>
                    <div class="difficulty-description" id="pronunciacion-description">
                        Selecciona la edad de tu hijo arriba para ver objetivos espec√≠ficos de pronunciaci√≥n.
                    </div>

                    <div class="interactive-exercise">
                        <div class="exercise-title">
                            <span>üéÆ</span>
                            <span>Safari de Sonidos Interactivo</span>
                        </div>
                        <div class="exercise-content">
                            <p>Haz clic en cada animal para practicar los sonidos:</p>
                            <div class="sound-exercise">
                                <button class="sound-btn" onclick="playAnimalSound('perro')">
                                    üêï Perro (P-B): "GUAU-GUAU"
                                </button>
                                <button class="sound-btn" onclick="playAnimalSound('gato')">
                                    üê± Gato (M): "MIAU"
                                </button>
                                <button class="sound-btn" onclick="playAnimalSound('vaca')">
                                    üêÑ Vaca (M-U): "MUUU"
                                </button>
                                <button class="sound-btn" onclick="playAnimalSound('pato')">
                                    ü¶Ü Pato (K): "CUAC-CUAC"
                                </button>
                                <button class="sound-btn" onclick="playAnimalSound('caballo')">
                                    üê¥ Caballo (T-D): "IIIH-AAA"
                                </button>
                                <div id="sound-feedback" style="margin-top: 15px; color: white;">
                                    üëÜ Selecciona un animal para practicar sonidos espec√≠ficos
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="strategies-grid" id="pronunciacion-strategies">
                        <div class="strategy-card">
                            <div class="strategy-title">
                                <span>‚ö†Ô∏è</span>
                                <span>Selecciona una edad</span>
                            </div>
                            <p>Usa los botones de edad arriba para ver objetivos espec√≠ficos de pronunciaci√≥n.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SECCI√ìN RETRASO DEL LENGUAJE -->
            <div class="tab-content" id="retraso">
                <div class="difficulty-section">
                    <div class="difficulty-title">
                        <span>‚ö°</span>
                        <span id="retraso-title">Retraso del Lenguaje: Intervenci√≥n por Edad</span>
                    </div>
                    <div class="difficulty-description" id="retraso-description">
                        Selecciona la edad de tu hijo arriba para ver estrategias espec√≠ficas de intervenci√≥n.
                    </div>

                    <div class="interactive-exercise">
                        <div class="exercise-title">
                            <span>üìä</span>
                            <span>Evaluaci√≥n R√°pida de Habilidades</span>
                        </div>
                        <div class="exercise-content">
                            <p>Marca las habilidades que tu hijo YA domina:</p>
                            <div class="skills-checklist" id="skills-checklist">
                                <div class="skill-item">
                                    <span>‚ö†Ô∏è Selecciona la edad de tu hijo arriba para ver la evaluaci√≥n espec√≠fica.</span>
                                </div>
                            </div>
                            <button class="interactive-btn" onclick="evaluateSkills()" style="margin-top: 15px;">
                                Evaluar Resultados
                            </button>
                            <div id="evaluation-results" style="margin-top: 15px; display: none;"></div>
                        </div>
                    </div>

                    <div class="strategies-grid" id="retraso-strategies">
                        <div class="strategy-card">
                            <div class="strategy-title">
                                <span>‚ö†Ô∏è</span>
                                <span>Selecciona una edad</span>
                            </div>
                            <p>Usa los botones de edad arriba para ver estrategias espec√≠ficas para retraso del lenguaje.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SECCI√ìN PLAN 21 D√çAS -->
            <div class="tab-content" id="plan21">
                <div class="interactive-exercise">
                    <div class="exercise-title">
                        <span>üéØ</span>
                        <span>Plan Terap√©utico de 21 D√≠as</span>
                    </div>
                    <div class="exercise-content">
                        <p><strong>üìã Instrucciones:</strong> Dedica 15-20 minutos diarios. Las actividades est√°n organizadas por semanas tem√°ticas y se adaptan autom√°ticamente a la edad seleccionada.</p>
                        <p style="margin-top: 10px;"><strong>üéØ Objetivo:</strong> Programa estructurado dise√±ado por terapeutas del lenguaje con actividades diarias espec√≠ficas para trabajar dificultades comunes.</p>
                    </div>
                </div>

                <div class="calendar-container">
                    <h3 style="color: #667eea; text-align: center; margin-bottom: 20px;">üìÖ Calendario de Actividades Terap√©uticas</h3>
                    
                    <div class="calendar-grid" id="calendar-grid">
                        <div class="calendar-header">Lun</div>
                        <div class="calendar-header">Mar</div>
                        <div class="calendar-header">Mi√©</div>
                        <div class="calendar-header">Jue</div>
                        <div class="calendar-header">Vie</div>
                        <div class="calendar-header">S√°b</div>
                        <div class="calendar-header">Dom</div>
                        
                        <!-- Los d√≠as se agregar√°n aqu√≠ directamente -->
                    </div>

                    <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 10px;">
                        <p style="color: #667eea; margin-bottom: 10px;"><strong>Leyenda:</strong></p>
                        <div style="display: flex; gap: 20px; flex-wrap: wrap;">
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <div style="width: 20px; height: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 50%;"></div>
                                <span style="font-size: 0.9em;">D√≠a de actividad terap√©utica</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <div style="width: 20px; height: 20px; background: linear-gradient(135deg, #00b894 0%, #00cec9 100%); border-radius: 50%;"></div>
                                <span style="font-size: 0.9em;">Actividad completada</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <div style="width: 20px; height: 20px; background: #f8f9fa; border: 2px solid #fd79a8; border-radius: 50%;"></div>
                                <span style="font-size: 0.9em;">D√≠a actual</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="days-detail" id="days-detail">
                    <!-- Se llenar√° con los detalles de las actividades -->
                </div>
            </div>
        </div>

        <div class="navigation">
            <a href="../modulo3/index.html" class="nav-btn">
                ‚Üê M√≥dulo 3: Actividades
            </a>
            <span>M√≥dulo 4 de 4</span>
            <a href="../dashboard/index.html" class="nav-btn">
                Finalizar Curso üéì
            </a>
        </div>
    </div>

    <script>
        // Variables globales
        let currentAge = null;
        let completedSections = 0;
        let breathingInterval = null;
        let isBreathing = false;

        // Datos espec√≠ficos por edad
        const ageData = {
            3: {
                tartamudez: {
                    title: "üó£Ô∏è Tartamudez a los 3 a√±os: Normal vs Preocupante",
                    description: "A los 3 a√±os, la tartamudez evolutiva es completamente normal. El cerebro del ni√±o est√° desarroll√°ndose r√°pidamente y a menudo piensa m√°s r√°pido de lo que puede hablar.",
                    strategies: [
                        {
                            title: "‚úÖ Se√±ales NORMALES a los 3 a√±os",
                            color: "#00b894",
                            steps: [
                                "Repite palabras completas: 'mam√°-mam√°-mam√° quiero agua'",
                                "Vacilaciones al inicio: 'eh... eh... yo quiero salir'",
                                "Ocurre cuando est√° emocionado, cansado o apurado",
                                "No hay tensi√≥n visible en cara o cuello",
                                "Dura episodios cortos (menos de 3 meses seguidos)",
                                "El ni√±o no se da cuenta de que tartamudea"
                            ]
                        },
                        {
                            title: "üö® Se√±ales de ALERTA",
                            color: "#e17055",
                            steps: [
                                "Bloqueos en sonidos individuales: 'p-p-p-pap√°'",
                                "Tensi√≥n visible en m√∫sculos faciales",
                                "Movimientos secundarios (parpadeo, golpes con pie)",
                                "Evita hablar o muestra frustraci√≥n evidente",
                                "Tartamudez persiste m√°s de 6 meses",
                                "Empeora en lugar de mejorar"
                            ]
                        },
                        {
                            title: "üí° T√©cnicas Espec√≠ficas para 3 a√±os",
                            color: "#667eea",
                            steps: [
                                "Habla 25% m√°s despacio: Modela un ritmo calmado",
                                "Haz pausas de 2 segundos entre tus oraciones",
                                "Reduce preguntas: M√°ximo 2 preguntas por conversaci√≥n",
                                "Comenta en lugar de preguntar: 'Veo que juegas con el auto'",
                                "Tiempo especial: 10 minutos diarios de juego sin presi√≥n verbal",
                                "Nunca digas 'respira' o 'habla despacio'"
                            ]
                        }
                    ]
                },
                pronunciacion: {
                    title: "üî§ Pronunciaci√≥n a los 3 a√±os: Desarrollo Normal",
                    description: "A los 3 a√±os, los ni√±os deben ser comprendidos por desconocidos el 75% del tiempo y dominar sonidos b√°sicos.",
                    strategies: [
                        {
                            title: "‚úÖ Sonidos que DEBE dominar a los 3 a√±os",
                            color: "#00b894",
                            steps: [
                                "Consonantes b√°sicas: m, p, b, t, d, k, g, n, f, h",
                                "Todas las vocales: a, e, i, o, u",
                                "Combinaciones simples: ma, pa, ta, no",
                                "Meta: 75% inteligible para extra√±os",
                                "Puede omitir sonidos finales ocasionalmente"
                            ]
                        },
                        {
                            title: "‚è≥ Sonidos que puede fallar (NORMAL)",
                            color: "#fdcb6e",
                            steps: [
                                "s, l, r, ch (normales hasta los 4-5 a√±os)",
                                "Grupos conson√°nticos: pl, br, tr",
                                "Puede decir 'toche' por 'coche'",
                                "Puede omitir la 's' final: 'gato' por 'gatos'",
                                "Sustituciones como 't' por 'k': 'tasa' por 'casa'"
                            ]
                        },
                        {
                            title: "üè† Ejercicios Diarios para Casa",
                            color: "#667eea",
                            steps: [
                                "Espejo m√°gico: 5 min frente al espejo haciendo muecas",
                                "Sopla y juega: Burbujas, plumas, papel para fortalecer m√∫sculos",
                                "Canciones con sonidos: 'Pin pon es un mu√±eco' (sonidos P)",
                                "Imitaci√≥n exagerada: Modela sonidos claramente sin corregir",
                                "Lectura interactiva: Libros con onomatopeyas",
                                "Safari de sonidos: Imitar animales diariamente"
                            ]
                        }
                    ]
                },
                retraso: {
                    title: "‚ö° Retraso del Lenguaje a los 3 a√±os",
                    description: "A los 3 a√±os, un ni√±o debe tener al menos 1000 palabras y formar oraciones de 3-4 palabras. La intervenci√≥n temprana es crucial.",
                    skills: [
                        "Dice frases de 3-4 palabras ('Quiero m√°s agua')",
                        "Vocabulario de al menos 1000 palabras",
                        "Hace preguntas simples ('¬øQu√© es eso?')",
                        "Cuenta hasta 3",
                        "Nombra colores b√°sicos (rojo, azul, amarillo)",
                        "Se entiende el 75% de lo que dice",
                        "Usa 'yo', 't√∫', 'm√≠o'",
                        "Describe acciones simples ('pap√° come')",
                        "Sigue instrucciones de 2 pasos"
                    ],
                    strategies: [
                        {
                            title: "üöÄ Plan de Estimulaci√≥n Intensiva",
                            color: "#e17055",
                            steps: [
                                "Narraci√≥n constante: Describe todo lo que haces",
                                "Expansi√≥n obligatoria: Si dice 'agua', t√∫ dices 'agua fr√≠a'",
                                "Preguntas de elecci√≥n: '¬øQuieres manzana o pl√°tano?'",
                                "Tiempo sin pantallas: Interacci√≥n humana exclusiva",
                                "3 libros diarios con participaci√≥n activa",
                                "Bombardeo ling√º√≠stico durante rutinas"
                            ]
                        },
                        {
                            title: "üìà T√©cnicas de Recuperaci√≥n R√°pida",
                            color: "#00b894",
                            steps: [
                                "Rutinas convertidas en terapia:",
                                "Ba√±o: 'Agua CALIENTE, jab√≥n SUAVE, burbujas GRANDES'",
                                "Comida: 'Manzana ROJA, pl√°tano AMARILLO, est√° DULCE'",
                                "Paseos: 'Carro AZUL, √°rbol ALTO, perro PEQUE√ëO'",
                                "Repetici√≥n sistem√°tica de nuevas palabras",
                                "Celebrar cada intento de comunicaci√≥n"
                            ]
                        }
                    ]
                }
            },
            4: {
                tartamudez: {
                    title: "üó£Ô∏è Tartamudez a los 4 a√±os: Desarrollo vs Intervenci√≥n",
                    description: "A los 4 a√±os, los ni√±os deben formar oraciones complejas con mayor fluidez. Si la tartamudez persiste despu√©s de los 6 meses o aumenta en intensidad, puede requerir intervenci√≥n profesional.",
                    strategies: [
                        {
                            title: "üéØ Evaluaci√≥n a los 4 a√±os",
                            color: "#667eea",
                            steps: [
                                "Debe formar oraciones de 5-6 palabras fluidamente",
                                "Vocabulario expresivo de 1500+ palabras",
                                "Puede contar experiencias simples",
                                "Usa tiempos verbales (pasado, futuro) correctamente",
                                "La comunicaci√≥n debe ser 90% fluida"
                            ]
                        },
                        {
                            title: "üö® SE√ëALES DE ALERTA a los 4 a√±os",
                            color: "#e17055",
                            steps: [
                                "Bloqueos en sonidos individuales: 'p-p-p-pap√°'",
                                "Tensi√≥n visible en m√∫sculos faciales",
                                "Movimientos secundarios (parpadeo, golpes con pie)",
                                "Evita hablar o muestra frustraci√≥n evidente",
                                "Tartamudez persiste m√°s de 6 meses",
                                "Empeora en lugar de mejorar gradualmente"
                            ]
                        },
                        {
                            title: "üõ†Ô∏è T√©cnicas Avanzadas para 4 a√±os",
                            color: "#00b894",
                            steps: [
                                "Habla suave: Usa 'inicio suave' en palabras con vocal",
                                "Turnos estructurados: 'Primero hablas t√∫, despu√©s yo'",
                                "Actividades de respiraci√≥n: Soplar burbujas, velas",
                                "Narraci√≥n compartida: Contar cuentos por turnos",
                                "Validaci√≥n emocional: 'Entiendo que es dif√≠cil hablar'",
                                "Coordinaci√≥n con maestros para consistencia"
                            ]
                        }
                    ]
                },
                pronunciacion: {
                    title: "üî§ Pronunciaci√≥n a los 4 a√±os: Refinamiento",
                    description: "A los 4 a√±os, la inteligibilidad debe ser del 85% y se agregan sonidos m√°s complejos.",
                    strategies: [
                        {
                            title: "‚úÖ Nuevos sonidos a los 4 a√±os",
                            color: "#00b894",
                            steps: [
                                "Se agregan: s, l, ch, j, √±, y",
                                "Domina todos los sonidos de los 3 a√±os",
                                "Inteligibilidad: 85% con desconocidos",
                                "Puede formar grupos simples: pl, bl",
                                "A√∫n pueden fallar: r, rr, grupos complejos"
                            ]
                        },
                        {
                            title: "üé™ Trabalenguas Graduales",
                            color: "#fdcb6e",
                            steps: [
                                "Nivel 1 (sonido S): 'Sana, sana, colita de rana'",
                                "Nivel 2 (sonido L): 'La Luna llena luce linda'",
                                "Nivel 3 (sonido CH): 'Chato chico come chocolate'",
                                "Nivel 4 (sonido LL): 'La llama llama a la lluvia'",
                                "Progresi√≥n gradual sin presi√≥n"
                            ]
                        },
                        {
                            title: "üîß T√©cnicas Espec√≠ficas para 4 a√±os",
                            color: "#667eea",
                            steps: [
                                "Modelado sin correcci√≥n: Repite correctamente sin criticar",
                                "Juegos de rimas: 'Casa, masa, pasa' para conciencia fonol√≥gica",
                                "Cuentos con sonidos espec√≠ficos: Historias ricas en sonidos",
                                "Ejercicios oro-faciales: Movimientos de lengua y labios",
                                "Grabaciones de progreso: Registra avances semanalmente",
                                "Teatro de sonidos: Dramatizar palabras dif√≠ciles"
                            ]
                        }
                    ]
                },
                retraso: {
                    title: "‚ö° Retraso del Lenguaje a los 4 a√±os",
                    description: "A los 4 a√±os con retraso, la intervenci√≥n debe ser m√°s estructurada y sistem√°tica, enfoc√°ndose en habilidades espec√≠ficas que faltan.",
                    skills: [
                        "Forma oraciones de 5-6 palabras",
                        "Vocabulario de al menos 1500 palabras",
                        "Hace preguntas con '¬øpor qu√©?'",
                        "Cuenta hasta 10",
                        "Usa verbos en pasado correctamente",
                        "Puede contar una historia simple",
                        "Sigue instrucciones de 3 pasos",
                        "Describe objetos con 2-3 caracter√≠sticas",
                        "Usa conectores simples ('y', 'pero')"
                    ],
                    strategies: [
                        {
                            title: "üé™ Programa Intensivo 4 a√±os",
                            color: "#e17055",
                            steps: [
                                "Sesiones estructuradas: 30 min diarios de actividades dirigidas",
                                "Objetivo semanal: 25 palabras nuevas por semana",
                                "Construcci√≥n de oraciones: Plantillas fijas 'Yo veo + objeto + color'",
                                "Juegos de roles: Situaciones sociales estructuradas",
                                "Coordinaci√≥n escolar: Trabajo conjunto con maestros",
                                "Registro diario de progreso con metas espec√≠ficas"
                            ]
                        },
                        {
                            title: "üìö T√©cnicas Avanzadas de Estimulaci√≥n",
                            color: "#00b894",
                            steps: [
                                "Narrativa estructurada: Inicio-desarrollo-final",
                                "Vocabulario tem√°tico: 5 palabras nuevas por tema",
                                "Preguntas en escalera: Simples ‚Üí complejas",
                                "Expansi√≥n sistem√°tica: Agregar 1 palabra por frase",
                                "Teatro familiar: Representar cuentos conocidos",
                                "Diario de palabras: Registrar nuevas adquisiciones"
                            ]
                        }
                    ]
                }
            },
            5: {
                tartamudez: {
                    title: "üó£Ô∏è Tartamudez a los 5 a√±os: Intervenci√≥n Temprana",
                    description: "A los 5 a√±os, si la tartamudez persiste, es fundamental buscar ayuda profesional. La intervenci√≥n temprana tiene tasas de √©xito del 80-90%.",
                    strategies: [
                        {
                            title: "‚ö†Ô∏è Momento Cr√≠tico para Intervenci√≥n",
                            color: "#e17055",
                            steps: [
                                "Evaluaci√≥n profesional inmediata si persiste",
                                "Tartamudez presente por m√°s de 12 meses",
                                "Impacto en la interacci√≥n social o autoestima",
                                "Preparaci√≥n para el entorno escolar",
                                "Historia familiar de tartamudez requiere atenci√≥n"
                            ]
                        },
                        {
                            title: "üéØ Estrategias espec√≠ficas para 5 a√±os",
                            color: "#667eea",
                            steps: [
                                "Conciencia sin ansiedad: 'A veces las palabras se atascan'",
                                "T√©cnicas de fluidez: Habla pausada y suave",
                                "Fortalecimiento emocional: 'Eres valiente cuando hablas'",
                                "Pr√°ctica estructurada: 15 minutos diarios de conversaci√≥n",
                                "Preparaci√≥n escolar: Coordinaci√≥n con maestros",
                                "Autoestima: Enfoque en fortalezas comunicativas"
                            ]
                        },
                        {
                            title: "üè• Cu√°ndo Buscar Ayuda Profesional",
                            color: "#fd79a8",
                            steps: [
                                "Tartamudez persiste m√°s de 12 meses",
                                "El ni√±o evita hablar o se frustra visiblemente",
                                "Hay historia familiar de tartamudez",
                                "Otros problemas del habla o lenguaje",
                                "Impacto en interacci√≥n social o autoestima",
                                "Comportamientos secundarios evidentes"
                            ]
                        }
                    ]
                },
                pronunciacion: {
                    title: "üî§ Pronunciaci√≥n a los 5 a√±os: Preparaci√≥n Escolar",
                    description: "A los 5 a√±os, debe ser 90% inteligible y manejar grupos conson√°nticos simples para estar preparado para el aprendizaje de la lectoescritura.",
                    strategies: [
                        {
                            title: "üéì Metas para 5 a√±os",
                            color: "#667eea",
                            steps: [
                                "Grupos conson√°nticos: pl, bl, cl, gl, fl",
                                "Sonidos complejos: ch, ll, √± completamente dominados",
                                "Preparaci√≥n para R: vibraci√≥n lingual b√°sica",
                                "90% inteligibilidad con extra√±os",
                                "Conciencia fonol√≥gica desarrollada",
                                "Puede separar palabras en s√≠labas"
                            ]
                        },
                        {
                            title: "üìö T√©cnicas Pre-lectoras",
                            color: "#00b894",
                            steps: [
                                "An√°lisis sil√°bico: Separar palabras en s√≠labas",
                                "Sonido inicial: '¬øCon qu√© sonido empieza casa?'",
                                "Rimas complejas: Crear familias de palabras",
                                "Deletreo fon√©tico: Sonidos de cada letra",
                                "Precisi√≥n articulatoria: Movimientos exactos",
                                "Metalenguaje: Hablar sobre el lenguaje"
                            ]
                        },
                        {
                            title: "üéØ Preparaci√≥n Acad√©mica",
                            color: "#fdcb6e",
                            steps: [
                                "Dictado de sonidos: Reconocer y escribir letras",
                                "Lectura labial: Observar movimientos al hablar",
                                "Discriminaci√≥n auditiva fina: Sonidos similares",
                                "Velocidad articulatoria: Habla clara y r√°pida",
                                "Autorregulaci√≥n: Detectar sus propios errores",
                                "Comunicaci√≥n escolar: Participar en clase"
                            ]
                        }
                    ]
                },
                retraso: {
                    title: "‚ö° Retraso del Lenguaje a los 5 a√±os",
                    description: "A los 5 a√±os, el retraso del lenguaje puede impactar significativamente el rendimiento escolar. La intervenci√≥n debe ser intensiva y profesional.",
                    skills: [
                        "Forma oraciones de 6+ palabras",
                        "Vocabulario de al menos 2000 palabras",
                        "Cuenta historias con inicio-desarrollo-final",
                        "Usa todos los tiempos verbales",
                        "Hace preguntas complejas",
                        "Describe eventos pasados detalladamente",
                        "Sigue instrucciones de 4+ pasos",
                        "Usa lenguaje abstracto b√°sico",
                        "Participa en conversaciones grupales"
                    ],
                    strategies: [
                        {
                            title: "‚ö†Ô∏è Intervenci√≥n Urgente Pre-escolar",
                            color: "#e17055",
                            steps: [
                                "Evaluaci√≥n profesional inmediata",
                                "Programa diario: 2 sesiones de 30 min estructuradas",
                                "Vocabulario acad√©mico: Palabras de matem√°ticas, ciencias",
                                "Habilidades narrativas: Contar y recontar historias",
                                "Preparaci√≥n para lectoescritura",
                                "Colaboraci√≥n: Fonoaudi√≥logo + psic√≥logo + maestro"
                            ]
                        },
                        {
                            title: "üéì Preparaci√≥n Escolar Intensiva",
                            color: "#667eea",
                            steps: [
                                "Vocabulario acad√©mico: T√©rminos escolares espec√≠ficos",
                                "Narraci√≥n estructurada: Historias con secuencia l√≥gica",
                                "Habilidades conversacionales: Turnos, temas, preguntas",
                                "Comprensi√≥n de instrucciones: Seguir reglas escolares",
                                "Expresi√≥n de necesidades: Comunicar en el aula",
                                "Socializaci√≥n verbal: Hacer amigos a trav√©s del lenguaje"
                            ]
                        }
                    ]
                }
            }
        };

        // Plan de 21 d√≠as
        const plan21Dias = [
            {
                number: 1,
                title: "Conexi√≥n Visual y Atenci√≥n",
                preview: "Establece la base fundamental: contacto visual sostenido y atenci√≥n conjunta.",
                objectives: ["Contacto Visual", "Atenci√≥n Conjunta", "Imitaci√≥n"],
                materials: "üß∞ Espejo grande, juguetes coloridos, m√∫sica suave",
                difficulty: "B√°sico"
            },
            {
                number: 2,
                title: "Exploraci√≥n Sensorial",
                preview: "Estimula vocabulario a trav√©s de texturas, formas y materiales diversos.",
                objectives: ["Vocabulario T√°ctil", "Descripci√≥n", "Categorizaci√≥n"],
                materials: "üß∞ Objetos texturas, caja sorpresa, tarjetas",
                difficulty: "B√°sico"
            },
            {
                number: 3,
                title: "Respiraci√≥n y Fluidez",
                preview: "Ejercicios respiratorios espec√≠ficos para mejorar el control del aire.",
                objectives: ["Control Respiratorio", "Fluidez", "Coordinaci√≥n"],
                materials: "üß∞ Burbujas, plumas, velas, silbatos",
                difficulty: "B√°sico"
            },
            {
                number: 4,
                title: "Sonidos y Articulaci√≥n",
                preview: "Safari de sonidos de animales para trabajar puntos de articulaci√≥n.",
                objectives: ["Articulaci√≥n", "Imitaci√≥n", "Onomatopeyas"],
                materials: "üß∞ Im√°genes animales, sonidos, espejo",
                difficulty: "B√°sico"
            },
            {
                number: 5,
                title: "Comprensi√≥n de Instrucciones",
                preview: "Desarrollo de comprensi√≥n auditiva atrav√©s de instrucciones graduales.",
                objectives: ["Comprensi√≥n", "Secuenciaci√≥n", "Memoria Auditiva"],
                materials: "üß∞ Objetos familiares, tarjetas secuencias",
                difficulty: "B√°sico"
            },
            {
                number: 6,
                title: "Expresi√≥n Corporal",
                preview: "Integraci√≥n de movimiento y lenguaje para fortalecer conexiones.",
                objectives: ["Coordinaci√≥n", "Ritmo", "Expresi√≥n"],
                materials: "üß∞ M√∫sica, pa√±uelos, instrumentos",
                difficulty: "B√°sico"
            },
            {
                number: 7,
                title: "Evaluaci√≥n Semanal",
                preview: "Revisi√≥n y consolidaci√≥n de logros de la primera semana.",
                objectives: ["Autoevaluaci√≥n", "Consolidaci√≥n", "Motivaci√≥n"],
                materials: "üß∞ Cuaderno progreso, stickers",
                difficulty: "Evaluaci√≥n"
            },
            {
                number: 8,
                title: "Narraci√≥n B√°sica",
                preview: "Construcci√≥n de historias simples: inicio, desarrollo, final.",
                objectives: ["Narrativa", "Secuenciaci√≥n", "Creatividad"],
                materials: "üß∞ Libros im√°genes, tarjetas secuencias",
                difficulty: "Intermedio"
            },
            {
                number: 9,
                title: "Preguntas y Respuestas",
                preview: "Desarrollo de habilidades conversacionales b√°sicas.",
                objectives: ["Conversaci√≥n", "Turnos", "Comprensi√≥n"],
                materials: "üß∞ Tarjetas preguntas, fotos familiares",
                difficulty: "Intermedio"
            },
            {
                number: 10,
                title: "Vocabulario Tem√°tico",
                preview: "Expansi√≥n sistem√°tica por categor√≠as: colores, formas, emociones.",
                objectives: ["Vocabulario", "Categorizaci√≥n", "Asociaci√≥n"],
                materials: "üß∞ Objetos coloridos, formas, tarjetas",
                difficulty: "Intermedio"
            },
            {
                number: 11,
                title: "Juegos de Memoria",
                preview: "Fortalecimiento de memoria auditiva y visual atrav√©s de juegos.",
                objectives: ["Memoria", "Atenci√≥n", "Concentraci√≥n"],
                materials: "üß∞ Cartas memoria, objetos, sonidos",
                difficulty: "Intermedio"
            },
            {
                number: 12,
                title: "Rimas y Ritmos",
                preview: "Desarrollo de conciencia fonol√≥gica atrav√©s de rimas y canciones.",
                objectives: ["Conciencia Fonol√≥gica", "Ritmo", "Rimas"],
                materials: "üß∞ Instrumentos, libros rimas",
                difficulty: "Intermedio"
            },
            {
                number: 13,
                title: "Emociones y Expresi√≥n",
                preview: "Identificaci√≥n y verbalizaci√≥n de emociones b√°sicas.",
                objectives: ["Vocabulario Emocional", "Autoconocimiento", "Empat√≠a"],
                materials: "üß∞ Caritas emociones, espejo, cuentos",
                difficulty: "Intermedio"
            },
            {
                number: 14,
                title: "Evaluaci√≥n Intermedia",
                preview: "Evaluaci√≥n completa del progreso y ajuste del plan final.",
                objectives: ["Autoevaluaci√≥n", "Planificaci√≥n", "Motivaci√≥n"],
                materials: "üß∞ Lista verificaci√≥n, cuaderno",
                difficulty: "Evaluaci√≥n"
            },
            {
                number: 15,
                title: "Teatro y Dramatizaci√≥n",
                preview: "Uso de dramatizaci√≥n para desarrollar expresi√≥n oral y confianza.",
                objectives: ["Expresi√≥n Oral", "Confianza", "Creatividad"],
                materials: "üß∞ Disfraces, t√≠teres, escenario",
                difficulty: "Avanzado"
            },
            {
                number: 16,
                title: "Construcci√≥n de Frases",
                preview: "T√©cnicas espec√≠ficas para alargar oraciones naturalmente.",
                objectives: ["Sintaxis", "Gram√°tica", "Fluidez"],
                materials: "üß∞ Tarjetas palabras, plantillas",
                difficulty: "Avanzado"
            },
            {
                number: 17,
                title: "Conversaci√≥n Guiada",
                preview: "Pr√°ctica de conversaciones estructuradas sobre temas espec√≠ficos.",
                objectives: ["Pragm√°tica", "Turnos", "Temas"],
                materials: "üß∞ L√°minas conversaci√≥n, cron√≥metro",
                difficulty: "Avanzado"
            },
            {
                number: 18,
                title: "Soluci√≥n de Problemas",
                preview: "Uso del lenguaje para resolver problemas y expresar soluciones.",
                objectives: ["Razonamiento", "Expresi√≥n", "L√≥gica"],
                materials: "üß∞ Puzzles, situaciones problema",
                difficulty: "Avanzado"
            },
            {
                number: 19,
                title: "Preparaci√≥n Social",
                preview: "Habilidades comunicativas para diferentes contextos sociales.",
                objectives: ["Pragm√°tica", "Cortes√≠a", "Adaptaci√≥n"],
                materials: "üß∞ Situaciones sociales, juegos rol",
                difficulty: "Avanzado"
            },
            {
                number: 20,
                title: "Integraci√≥n de Habilidades",
                preview: "Combinaci√≥n de todas las habilidades trabajadas en actividades complejas.",
                objectives: ["Integraci√≥n", "Fluidez", "Confianza"],
                materials: "üß∞ Actividades complejas, proyectos",
                difficulty: "Avanzado"
            },
            {
                number: 21,
                title: "Evaluaci√≥n Final y Celebraci√≥n",
                preview: "Evaluaci√≥n completa del progreso y celebraci√≥n de logros.",
                objectives: ["Evaluaci√≥n", "Celebraci√≥n", "Planificaci√≥n Futura"],
                materials: "üß∞ Certificado, registro final",
                difficulty: "Evaluaci√≥n"
            }
        ];

        // Inicializaci√≥n
        document.addEventListener('DOMContentLoaded', function() {
            initializeModule();
            setupEventListeners();
            generateCalendar();
            generateDaysDetail();
        });

        function initializeModule() {
            updateProgress();
        }

        function setupEventListeners() {
            // Botones de edad
            document.querySelectorAll('.age-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    selectAge(parseInt(this.dataset.age));
                });
            });

            // Tabs
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    showTab(this.dataset.tab);
                });
            });
        }

        function selectAge(age) {
            currentAge = age;
            
            // Actualizar botones de edad
            document.querySelectorAll('.age-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`.age-btn[data-age="${age}"]`).classList.add('active');
            
            // Actualizar contenido
            updateTartamudezContent();
            updatePronunciacionContent();
            updateRetrasoContent();
            updateSkillsChecklist();
            updateProgress();
        }

        function showTab(tabName) {
            // Actualizar tabs
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`.tab-btn[data-tab="${tabName}"]`).classList.add('active');
            
            // Mostrar contenido
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(tabName).classList.add('active');
            
            updateProgress();
        }

        function updateTartamudezContent() {
            if (!currentAge || !ageData[currentAge]) return;
            
            const data = ageData[currentAge].tartamudez;
            
            document.getElementById('tartamudez-title').textContent = data.title;
            document.getElementById('tartamudez-description').textContent = data.description;
            
            const strategiesGrid = document.getElementById('tartamudez-strategies');
            strategiesGrid.innerHTML = '';
            
            data.strategies.forEach(strategy => {
                const strategyCard = document.createElement('div');
                strategyCard.className = 'strategy-card';
                strategyCard.style.background = `linear-gradient(135deg, ${strategy.color} 0%, ${strategy.color}dd 100%)`;
                
                strategyCard.innerHTML = `
                    <div class="strategy-title">${strategy.title}</div>
                    <ul class="strategy-steps">
                        ${strategy.steps.map(step => `<li>${step}</li>`).join('')}
                    </ul>
                `;
                
                strategiesGrid.appendChild(strategyCard);
            });
        }

        function updatePronunciacionContent() {
            if (!currentAge || !ageData[currentAge]) return;
            
            const data = ageData[currentAge].pronunciacion;
            
            document.getElementById('pronunciacion-title').textContent = data.title;
            document.getElementById('pronunciacion-description').textContent = data.description;
            
            const strategiesGrid = document.getElementById('pronunciacion-strategies');
            strategiesGrid.innerHTML = '';
            
            data.strategies.forEach(strategy => {
                const strategyCard = document.createElement('div');
                strategyCard.className = 'strategy-card';
                strategyCard.style.background = `linear-gradient(135deg, ${strategy.color} 0%, ${strategy.color}dd 100%)`;
                
                strategyCard.innerHTML = `
                    <div class="strategy-title">${strategy.title}</div>
                    <ul class="strategy-steps">
                        ${strategy.steps.map(step => `<li>${step}</li>`).join('')}
                    </ul>
                `;
                
                strategiesGrid.appendChild(strategyCard);
            });
        }

        function updateRetrasoContent() {
            if (!currentAge || !ageData[currentAge]) return;
            
            const data = ageData[currentAge].retraso;
            
            document.getElementById('retraso-title').textContent = data.title;
            document.getElementById('retraso-description').textContent = data.description;
            
            const strategiesGrid = document.getElementById('retraso-strategies');
            strategiesGrid.innerHTML = '';
            
            data.strategies.forEach(strategy => {
                const strategyCard = document.createElement('div');
                strategyCard.className = 'strategy-card';
                strategyCard.style.background = `linear-gradient(135deg, ${strategy.color} 0%, ${strategy.color}dd 100%)`;
                
                strategyCard.innerHTML = `
                    <div class="strategy-title">${strategy.title}</div>
                    <ul class="strategy-steps">
                        ${strategy.steps.map(step => `<li>${step}</li>`).join('')}
                    </ul>
                `;
                
                strategiesGrid.appendChild(strategyCard);
            });
        }

        function updateSkillsChecklist() {
            if (!currentAge || !ageData[currentAge]) return;
            
            const data = ageData[currentAge].retraso;
            const checklist = document.getElementById('skills-checklist');
            
            checklist.innerHTML = '';
            
            data.skills.forEach((skill, index) => {
                const skillItem = document.createElement('div');
                skillItem.className = 'skill-item';
                skillItem.innerHTML = `
                    <input type="checkbox" class="skill-checkbox" id="skill-${index}" data-skill="${index}">
                    <label for="skill-${index}" style="color: white;">${skill}</label>
                `;
                checklist.appendChild(skillItem);
            });
        }

        function generateCalendar() {
            const calendarGrid = document.getElementById('calendar-grid');
            if (!calendarGrid) return;
            
            // Limpiar solo los d√≠as, mantener los encabezados
            const existingDays = calendarGrid.querySelectorAll('.calendar-day');
            existingDays.forEach(day => day.remove());
            
            // Generar 21 d√≠as + algunos d√≠as vac√≠os para completar la grid
            for (let i = 1; i <= 21; i++) {
                const dayData = plan21Dias[i-1];
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day therapy-day';
                dayElement.onclick = () => scrollToDayDetail(i);
                
                dayElement.innerHTML = `
                    <div class="day-number">${i}</div>
                    <div class="day-activity">${dayData.title}</div>
                `;
                
                calendarGrid.appendChild(dayElement);
            }
            
            // Agregar d√≠as vac√≠os para completar la √∫ltima semana
            const remainingDays = 7 - (21 % 7);
            if (remainingDays < 7) {
                for (let i = 0; i < remainingDays; i++) {
                    const emptyDay = document.createElement('div');
                    emptyDay.className = 'calendar-day';
                    emptyDay.style.opacity = '0.3';
                    calendarGrid.appendChild(emptyDay);
                }
            }
        }

        function generateDaysDetail() {
            const daysDetail = document.getElementById('days-detail');
            if (!daysDetail) return;
            
            daysDetail.innerHTML = '';
            
            plan21Dias.forEach(day => {
                const dayCard = document.createElement('div');
                dayCard.className = 'day-card';
                dayCard.id = `day-${day.number}`;
                
                dayCard.innerHTML = `
                    <div class="day-card-number">${day.number}</div>
                    <div class="day-title">${day.title}</div>
                    <div class="day-preview">${day.preview}</div>
                    <div class="day-objectives">
                        <h4>üéØ Habilidades a desarrollar:</h4>
                        <ul>
                            ${day.objectives.map(obj => `<li>${obj}</li>`).join('')}
                        </ul>
                    </div>
                    <div style="margin: 10px 0;">
                        ${day.materials}
                    </div>
                    <div class="day-difficulty">${day.difficulty}</div>
                `;
                
                daysDetail.appendChild(dayCard);
            });
        }

        function scrollToDayDetail(dayNumber) {
            const dayElement = document.getElementById(`day-${dayNumber}`);
            if (dayElement) {
                dayElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                dayElement.style.transform = 'scale(1.02)';
                setTimeout(() => {
                    dayElement.style.transform = 'scale(1)';
                }, 300);
            }
        }

        function checkTartamudezAnswer(answer) {
            const feedback = document.getElementById('tartamudez-feedback');
            feedback.style.display = 'block';
            
            if (answer === 'right') {
                feedback.innerHTML = `
                    <div style="background: rgba(0, 200, 83, 0.2); padding: 15px; border-radius: 8px; border-left: 4px solid #00c853;">
                        <strong>‚úÖ ¬°CORRECTO!</strong><br>
                        <strong>¬øPor qu√© funciona?</strong> Respondes al mensaje, no a C√ìMO habla. Hablas despacio como modelo natural sin presionar.
                    </div>
                `;
            } else {
                feedback.innerHTML = `
                    <div style="background: rgba(244, 67, 54, 0.2); padding: 15px; border-radius: 8px; border-left: 4px solid #f44336;">
                        <strong>‚ùå INCORRECTO</strong><br>
                        <strong>¬øPor qu√© est√° mal?</strong> Le das m√°s atenci√≥n a C√ìMO habla que a QU√â dice. Esto aumenta la ansiedad.
                    </div>
                `;
            }
        }

        function startBreathingExercise() {
            const circle = document.getElementById('breathingCircle');
            const text = document.getElementById('breathingText');
            
            if (isBreathing) {
                clearInterval(breathingInterval);
                isBreathing = false;
                circle.classList.remove('inhale', 'exhale');
                text.textContent = 'Iniciar';
                return;
            }
            
            isBreathing = true;
            let phase = 'inhale';
            
            function breathingCycle() {
                if (phase === 'inhale') {
                    circle.classList.remove('exhale');
                    circle.classList.add('inhale');
                    text.textContent = 'Inspira...';
                    phase = 'exhale';
                } else {
                    circle.classList.remove('inhale');
                    circle.classList.add('exhale');
                    text.textContent = 'Exhala...';
                    phase = 'inhale';
                }
            }
            
            breathingCycle();
            breathingInterval = setInterval(breathingCycle, 4000);
            
            // Parar autom√°ticamente despu√©s de 1 minuto
            setTimeout(() => {
                if (isBreathing) {
                    clearInterval(breathingInterval);
                    isBreathing = false;
                    circle.classList.remove('inhale', 'exhale');
                    text.textContent = 'Completado ‚úì';
                }
            }, 60000);
        }

        function playAnimalSound(animal) {
            const feedback = document.getElementById('sound-feedback');
            const sounds = {
                perro: {
                    sound: 'GUAU-GUAU',
                    instruction: 'Exagera los labios al pronunciar las letras P y B. Haz que tu hijo te mire mientras lo haces.',
                    target: 'Fortalece m√∫sculos labiales para sonidos P-B'
                },
                gato: {
                    sound: 'MIAU',
                    instruction: 'Cierra bien los labios en la M. Mant√©n el sonido "Mmmm" por 3 segundos.',
                    target: 'Desarrolla control de sonidos nasales M-N'
                },
                vaca: {
                    sound: 'MUUU',
                    instruction: 'Alarga el sonido "Mmmm" y luego abre para "UUU". Siente la vibraci√≥n en los labios.',
                    target: 'Combina consonantes nasales con vocales'
                },
                pato: {
                    sound: 'CUAC-CUAC',
                    instruction: 'Sonido fuerte al final con la K. Siente como la lengua toca el paladar.',
                    target: 'Fortalece sonidos velares K-G'
                },
                caballo: {
                    sound: 'IIIH-AAA',
                    instruction: 'Lengua arriba para el sonido fuerte. Alterna entre agudo y grave.',
                    target: 'Ejercita m√∫sculos linguales T-D'
                }
            };
            
            const animalData = sounds[animal];
            feedback.innerHTML = `
                <div style="text-align: left;">
                    <strong>üîä ${animalData.sound}</strong><br>
                    <strong>üìã Instrucci√≥n:</strong> ${animalData.instruction}<br>
                    <strong>üéØ Objetivo:</strong> ${animalData.target}
                </div>
            `;
        }

        function evaluateSkills() {
            if (!currentAge) {
                alert('Por favor, selecciona la edad de tu hijo primero.');
                return;
            }
            
            const checkedSkills = document.querySelectorAll('.skill-checkbox:checked').length;
            const totalSkills = ageData[currentAge].retraso.skills.length;
            const percentage = (checkedSkills / totalSkills) * 100;
            
            const results = document.getElementById('evaluation-results');
            results.style.display = 'block';
            
            let evaluation, color, recommendations;
            
            if (percentage >= 80) {
                evaluation = 'Desarrollo Normal';
                color = '#00c853';
                recommendations = `¬°Excelente! Tu hijo est√° desarroll√°ndose normalmente para su edad. Contin√∫a con las actividades de estimulaci√≥n diarias.`;
            } else if (percentage >= 60) {
                evaluation = 'Desarrollo Ligeramente Retrasado';
                color = '#ff9800';
                recommendations = `Tu hijo necesita estimulaci√≥n adicional. Dedica 20-30 minutos diarios a actividades espec√≠ficas del plan de 21 d√≠as.`;
            } else {
                evaluation = 'Retraso Significativo';
                color = '#f44336';
                recommendations = `Es recomendable consultar con un fonoaudi√≥logo. Mientras tanto, implementa el plan intensivo de estimulaci√≥n.`;
            }
            
            results.innerHTML = `
                <div style="background: rgba(255,255,255,0.9); color: #333; padding: 15px; border-radius: 8px; border-left: 4px solid ${color};">
                    <strong>üìä Resultado: ${evaluation}</strong><br>
                    <strong>üìà Puntuaci√≥n:</strong> ${checkedSkills}/${totalSkills} habilidades (${percentage.toFixed(0)}%)<br><br>
                    <strong>üí° Recomendaciones:</strong><br>
                    ${recommendations}
                </div>
            `;
        }

        function updateProgress() {
            let progress = 0;
            completedSections = 0;
            
            // Verificar si se seleccion√≥ edad
            if (currentAge) {
                progress += 25;
                completedSections++;
            }
            
            // Verificar qu√© tabs est√°n activos/visitados
            const activeTab = document.querySelector('.tab-btn.active').dataset.tab;
            if (activeTab && currentAge) {
                progress += 25;
                if (completedSections === 1) completedSections++;
            }
            
            // Si se complet√≥ la evaluaci√≥n de habilidades
            const evaluationResults = document.getElementById('evaluation-results');
            if (evaluationResults && evaluationResults.style.display === 'block') {
                progress += 25;
                if (completedSections === 2) completedSections++;
            }
            
            // Si se us√≥ alg√∫n ejercicio interactivo
            const tartamudezFeedback = document.getElementById('tartamudez-feedback');
            if (tartamudezFeedback && tartamudezFeedback.style.display === 'block') {
                progress += 25;
                if (completedSections === 3) completedSections++;
            }
            
            // Actualizar barra de progreso
            const progressBar = document.getElementById('progressBar');
            const progressText = document.getElementById('progressText');
            
            if (progressBar) {
                progressBar.style.width = progress + '%';
            }
            
            if (progressText) {
                progressText.textContent = `${progress}% completado ‚Ä¢ ${completedSections} de 4 secciones`;
            }
        }
    </script>
</body>
</html>
