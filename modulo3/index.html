<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Módulo 3: Actividades y Juegos - Estimulación del Lenguaje</title>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .header {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 1rem 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }

        .logo {
            font-size: 1.2rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            transition: opacity 0.3s;
        }

        .nav-links a:hover {
            opacity: 0.8;
        }

        .main-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 100px 2rem 2rem;
        }

        .progress-section {
            background: white;
            padding: 1.5rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .progress-bar {
            background: #e9ecef;
            height: 12px;
            border-radius: 6px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .progress-fill {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            height: 100%;
            width: 0%;
            transition: width 0.5s ease;
        }

        .module-header {
            background: white;
            padding: 3rem;
            border-radius: 20px;
            text-align: center;
            margin-bottom: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .module-header h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Contexto educativo */
        .educational-context {
            background: linear-gradient(135deg, #e8f5e8 0%, #f0f8ff 100%);
            padding: 2rem;
            border-radius: 15px;
            margin: 2rem 0;
            border-left: 5px solid #28a745;
        }

        .educational-context h3 {
            color: #155724;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .educational-context p {
            color: #155724;
            font-size: 1.1rem;
            margin-bottom: 0.8rem;
        }

        .educational-context ul {
            color: #155724;
            margin-left: 1.5rem;
        }

        .educational-context li {
            margin-bottom: 0.5rem;
        }

        .age-selector {
            background: linear-gradient(135deg, #f093fb20 0%, #f5576c20 100%);
            padding: 2rem;
            border-radius: 15px;
            margin: 2rem 0;
            border: 2px solid #f093fb;
        }

        .age-buttons {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .age-btn {
            background: white;
            color: #764ba2;
            padding: 1rem 2rem;
            border: 2px solid #764ba2;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            min-width: 120px;
        }

        .age-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(118, 75, 162, 0.3);
        }

        .age-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: transparent;
        }

        .content-section {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .section-title {
            font-size: 1.8rem;
            color: #2c3e50;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Instrucciones de actividades mejoradas */
        .activity-instructions {
            background: #ffffff;
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1rem 0;
            border: 2px solid #667eea;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.1);
        }

        .activity-instructions h4 {
            color: #2c3e50;
            margin-bottom: 1rem;
            font-weight: bold;
        }

        .activity-instructions .steps {
            counter-reset: step-counter;
        }

        .activity-instructions .step {
            counter-increment: step-counter;
            margin-bottom: 1rem;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
            position: relative;
            padding-left: 3rem;
            border-left: 3px solid #28a745;
            color: #2c3e50;
        }

        .activity-instructions .step::before {
            content: counter(step-counter);
            position: absolute;
            left: 0.8rem;
            top: 1rem;
            background: #28a745;
            color: white;
            width: 1.5rem;
            height: 1.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .activity-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        /* Tarjetas de actividad mejoradas */
        .activity-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            border: 3px solid transparent;
            animation: subtlePulse 3s ease-in-out infinite;
        }

        @keyframes subtlePulse {
            0%, 100% { 
                transform: scale(1);
                box-shadow: 0 5px 15px rgba(118, 75, 162, 0.2);
            }
            50% { 
                transform: scale(1.02);
                box-shadow: 0 8px 25px rgba(118, 75, 162, 0.3);
            }
        }

        .activity-card:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 15px 35px rgba(118, 75, 162, 0.5);
            border-color: #ffd700;
            animation: none;
        }

        .activity-card::before {
            content: '👆 Haz clic para aprender';
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 255, 255, 0.95);
            color: #2c3e50;
            font-size: 0.7rem;
            padding: 0.3rem 0.6rem;
            border-radius: 20px;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 2;
        }

        .activity-card:hover::before {
            opacity: 1;
        }

        .activity-card.completed {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            border-color: #28a745;
            animation: none;
        }

        .activity-card.completed::after {
            content: '✓ Completado';
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 255, 255, 0.95);
            color: #28a745;
            font-size: 0.8rem;
            padding: 0.3rem 0.6rem;
            border-radius: 20px;
            font-weight: bold;
            z-index: 2;
        }

        .activity-card.completed::before {
            display: none;
        }

        /* Efecto de clic */
        .activity-card:active {
            transform: translateY(-2px) scale(0.98);
            transition: transform 0.1s ease;
        }

        .activity-icon {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .activity-title {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .activity-description {
            font-size: 0.95rem;
            opacity: 0.95;
            margin-bottom: 1rem;
        }

        /* Etiqueta "PARA HACER EN CASA" */
        .home-activity-badge {
            background: rgba(255, 255, 255, 0.2);
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-top: 0.5rem;
            display: inline-block;
        }

        /* Sistema de Modales */
        .activity-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 10000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .activity-modal.show {
            display: flex;
            animation: modalFadeIn 0.3s ease;
        }

        .activity-modal-content {
            background: white;
            border-radius: 15px;
            max-width: 900px;
            max-height: 90vh;
            width: 100%;
            overflow-y: auto;
            position: relative;
            animation: modalSlideIn 0.3s ease;
        }

        .activity-modal-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 15px 15px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .activity-modal-close {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s ease;
        }

        .activity-modal-close:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .activity-modal-body {
            padding: 2rem;
        }

        @keyframes modalFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes modalSlideIn {
            from { 
                transform: scale(0.8) translateY(-50px); 
                opacity: 0; 
            }
            to { 
                transform: scale(1) translateY(0); 
                opacity: 1; 
            }
        }

        .game-container {
            background: #f8f9fa;
            padding: 2rem;
            border-radius: 15px;
            margin: 2rem 0;
            border: 3px solid #667eea;
        }

        .demo-label {
            background: #ffc107;
            color: #212529;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: bold;
            margin-bottom: 1rem;
            display: inline-block;
            font-size: 0.9rem;
        }

        /* Navegación mejorada */
        .navigation {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            margin: 3rem 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
        }

        .nav-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1rem 2rem;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(118, 75, 162, 0.4);
        }

        .nav-btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .module-completion {
            text-align: center;
            color: #28a745;
            font-weight: bold;
        }

        /* Evaluación final */
        .final-evaluation {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 2rem;
            border-radius: 15px;
            margin: 2rem 0;
            display: none;
        }

        .final-evaluation.show {
            display: block;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .evaluation-question {
            margin-bottom: 2rem;
        }

        .evaluation-question h4 {
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .evaluation-options {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .evaluation-option {
            background: rgba(255, 255, 255, 0.1);
            padding: 1rem;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .evaluation-option:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .evaluation-option.selected {
            background: rgba(255, 255, 255, 0.9);
            color: #2c3e50;
            border-color: #ffd700;
        }

        .evaluation-submit {
            background: white;
            color: #f093fb;
            padding: 1rem 2rem;
            border: none;
            border-radius: 50px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 1rem;
        }

        .evaluation-submit:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .evaluation-submit:disabled {
            background: #6c757d;
            color: white;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .main-content {
                padding: 80px 1rem 1rem;
            }

            .nav-container {
                padding: 0 1rem;
            }

            .age-buttons {
                flex-direction: column;
                align-items: center;
            }

            .age-btn {
                width: 100%;
                max-width: 300px;
            }

            .activity-grid {
                grid-template-columns: 1fr;
            }

            .navigation {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }

            .activity-modal-content {
                margin: 1rem;
                max-height: 85vh;
            }

            .module-header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="nav-container">
            <div class="logo">
                🧠 Academia de Psicología
            </div>
            <nav class="nav-links">
                <a href="#inicio">Inicio</a>
                <a href="#progreso">Progreso</a>
                <a href="#contacto">Contacto</a>
            </nav>
        </div>
    </header>

    <main class="main-content">
        <!-- Progreso del Módulo -->
        <section class="progress-section">
            <h3>📊 Progreso del Módulo 3</h3>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <p id="progressText">0% completado • 0 de 10 actividades realizadas</p>
        </section>

        <!-- Header del Módulo -->
        <section class="module-header">
            <h1>🎮 Módulo 3: Actividades y Juegos</h1>
            <p>Actividades prácticas y juegos educativos para estimular el desarrollo del lenguaje en casa</p>
        </section>

        <!-- Contexto Educativo -->
        <section class="educational-context">
            <h3>🎯 ¿Por qué son importantes estas actividades?</h3>
            <p><strong>Fundamento Pedagógico:</strong> El juego es la herramienta más poderosa para el aprendizaje infantil. Estas actividades están diseñadas por especialistas en desarrollo del lenguaje y han demostrado científicamente su eficacia.</p>
            
            <p><strong>Beneficios comprobados:</strong></p>
            <ul>
                <li><strong>Estimulación multisensorial:</strong> Activan múltiples áreas del cerebro simultáneamente</li>
                <li><strong>Aprendizaje natural:</strong> Los niños aprenden sin darse cuenta que están "estudiando"</li>
                <li><strong>Vínculo afectivo:</strong> Fortalecen la relación padres-hijos durante el proceso</li>
                <li><strong>Progresión gradual:</strong> Cada actividad se basa en la anterior, construyendo habilidades paso a paso</li>
                <li><strong>Adaptabilidad:</strong> Se ajustan al ritmo y preferencias de cada niño</li>
            </ul>

            <p><strong>💡 Recuerda:</strong> La consistencia es más importante que la perfección. 15 minutos diarios de estas actividades tendrán un impacto significativo en el desarrollo de tu hijo.</p>
        </section>

        <!-- Selector de Edad -->
        <section class="age-selector">
            <h3>👶 Personaliza las actividades para la edad de tu hijo</h3>
            <p>Selecciona la edad para adaptar automáticamente la dificultad y las instrucciones:</p>
            <div class="age-buttons">
                <button class="age-btn" data-age="3">👶 3 años</button>
                <button class="age-btn" data-age="4">👦 4 años</button>
                <button class="age-btn" data-age="5">👧 5 años</button>
            </div>
        </section>

        <!-- Actividades Principales -->
        <section class="content-section">
            <h2 class="section-title">🎪 Actividades Interactivas</h2>
            <p>Haz clic en cada actividad para ver las instrucciones completas adaptadas a la edad de tu hijo:</p>
            
            <div class="activity-grid" id="activityGrid">
                <!-- Las actividades se cargarán dinámicamente -->
            </div>
        </section>

        <!-- Evaluación Final -->
        <section class="final-evaluation" id="finalEvaluation">
            <h3>🎯 Evaluación Final del Módulo 3</h3>
            <p>Antes de continuar al Módulo 4, responde estas preguntas para consolidar tu aprendizaje:</p>
            
            <div class="evaluation-question">
                <h4>1. ¿Cuál es la duración recomendada para cada sesión de actividades?</h4>
                <div class="evaluation-options">
                    <div class="evaluation-option" data-question="1" data-answer="a">
                        a) 5-10 minutos (puede ser muy poco para crear hábito)
                    </div>
                    <div class="evaluation-option" data-question="1" data-answer="b">
                        b) 15-20 minutos (tiempo ideal para mantener atención)
                    </div>
                    <div class="evaluation-option" data-question="1" data-answer="c">
                        c) 30-45 minutos (puede cansar al niño)
                    </div>
                </div>
            </div>

            <div class="evaluation-question">
                <h4>2. ¿Qué hacer si tu hijo se frustra durante una actividad?</h4>
                <div class="evaluation-options">
                    <div class="evaluation-option" data-question="2" data-answer="a">
                        a) Insistir hasta que lo logre (puede crear rechazo)
                    </div>
                    <div class="evaluation-option" data-question="2" data-answer="b">
                        b) Pausar, simplificar o cambiar de actividad (respeta su ritmo)
                    </div>
                    <div class="evaluation-option" data-question="2" data-answer="c">
                        c) Dejarlo para más tarde (pierde el momento de aprendizaje)
                    </div>
                </div>
            </div>

            <div class="evaluation-question">
                <h4>3. ¿Cuál es el objetivo principal de estas actividades?</h4>
                <div class="evaluation-options">
                    <div class="evaluation-option" data-question="3" data-answer="a">
                        a) Que el niño hable perfectamente (presión innecesaria)
                    </div>
                    <div class="evaluation-option" data-question="3" data-answer="b">
                        b) Estimular el desarrollo natural del lenguaje (objetivo correcto)
                    </div>
                    <div class="evaluation-option" data-question="3" data-answer="c">
                        c) Completar todas las actividades rápidamente (no respeta el proceso)
                    </div>
                </div>
            </div>

            <button class="evaluation-submit" id="evaluationSubmit" onclick="submitEvaluation()" disabled>
                Completar Evaluación
            </button>

            <div id="evaluationResult" style="display: none; margin-top: 2rem;">
                <h4>¡Excelente! Has completado la evaluación correctamente.</h4>
                <p>Ahora puedes continuar al Módulo 4 donde aprenderás sobre dificultades comunes y su manejo.</p>
            </div>
        </section>

        <!-- Navegación -->
        <section class="navigation">
            <a href="../modulo2/index.html" class="nav-btn">
                ← Módulo 2: Desarrollo por Edades
            </a>
            <div class="module-completion" id="moduleCompletion">
                Completa todas las actividades para continuar
            </div>
            <a href="../modulo4/index.html" class="nav-btn" id="nextModuleBtn" style="display: none;">
                Módulo 4: Dificultades Comunes →
            </a>
        </section>
    </main>

    <!-- Modal para Actividades -->
    <div class="activity-modal" id="activityModal">
        <div class="activity-modal-content">
            <div class="activity-modal-header">
                <h3 id="modalTitle">Título de la Actividad</h3>
                <button class="activity-modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="activity-modal-body" id="modalBody">
                <!-- Contenido se carga dinámicamente -->
            </div>
        </div>
    </div>

    <script>
        // Variables globales
        let selectedAge = null;
        let completedActivities = [];
        let allActivitiesComplete = false;
        let evaluationAnswers = {};
        
        // Datos de actividades por edad
        const activitiesData = {
            3: [
                {
                    icon: "🎵",
                    title: "Canciones con Gestos",
                    description: "Canciones simples con movimientos para estimular la expresión",
                    content: `
                        <div class="activity-instructions">
                            <h4>🎯 Objetivo:</h4>
                            <p>Desarrollar vocabulario básico y coordinación a través de canciones simples con gestos.</p>
                            
                            <h4>📋 Instrucciones paso a paso:</h4>
                            <div class="steps">
                                <div class="step">Siéntate frente a tu hijo en el suelo, a su altura</div>
                                <div class="step">Comienza con "Pin Pon" haciendo gestos exagerados</div>
                                <div class="step">Repite cada verso 3 veces antes de continuar</div>
                                <div class="step">Anima a tu hijo a imitar los gestos, no importa si no canta</div>
                                <div class="step">Celebra cada intento de participación con entusiasmo</div>
                            </div>
                            
                            <h4>🎼 Canciones recomendadas para 3 años:</h4>
                            <ul>
                                <li><strong>"Pin Pon"</strong> - gestos de lavarse la cara, peinarse</li>
                                <li><strong>"Los Pollitos"</strong> - movimientos de picotear, aletear</li>
                                <li><strong>"Cinco Lobitos"</strong> - contar con los dedos</li>
                            </ul>
                            
                            <div class="demo-label">🎮 Demostración Interactiva</div>
                            <div class="game-container">
                                <h4>Practica "Pin Pon" - Haz clic en cada verso:</h4>
                                <button onclick="playVerse(1)" style="margin: 5px; padding: 10px; border-radius: 5px; border: none; background: #007bff; color: white;">
                                    🧼 "Pin Pon se lava la cara" (gestos de lavarse)
                                </button>
                                <button onclick="playVerse(2)" style="margin: 5px; padding: 10px; border-radius: 5px; border: none; background: #007bff; color: white;">
                                    🪥 "Con agua y con jabón" (frotar las manos)
                                </button>
                                <button onclick="playVerse(3)" style="margin: 5px; padding: 10px; border-radius: 5px; border: none; background: #007bff; color: white;">
                                    💤 "Y cuando se va a dormir" (cerrar los ojos)
                                </button>
                                <div id="verseResult" style="margin-top: 10px; font-weight: bold;"></div>
                            </div>
                            
                            <div style="background: #e8f5e8; padding: 15px; border-radius: 10px; margin-top: 20px;">
                                <h4 style="color: #155724;">✅ Señales de progreso (3 años):</h4>
                                <ul style="color: #155724;">
                                    <li>Imita algunos gestos aunque no cante</li>
                                    <li>Muestra interés y sonríe durante la actividad</li>
                                    <li>Comienza a vocalizar algunos sonidos de la canción</li>
                                    <li>Pide repetir la actividad ("más música")</li>
                                </ul>
                            </div>
                        `
                },
                {
                    icon: "📚",
                    title: "Cuentos Interactivos",
                    description: "Narración participativa con preguntas simples y señalar objetos",
                    content: `
                        <div class="activity-instructions">
                            <h4>🎯 Objetivo:</h4>
                            <p>Desarrollar comprensión auditiva, atención y vocabulario básico a través de cuentos participativos.</p>
                            
                            <h4>📋 Instrucciones paso a paso:</h4>
                            <div class="steps">
                                <div class="step">Elige un cuento con imágenes grandes y simples</div>
                                <div class="step">Siéntate con tu hijo en tu regazo o a su lado</div>
                                <div class="step">Lee despacio, señalando cada imagen mientras nombras</div>
                                <div class="step">Haz pausas para preguntar "¿Dónde está el...?" señalando</div>
                                <div class="step">Celebra cuando señale correctamente, aunque sea aproximado</div>
                            </div>
                            
                            <h4>📖 Técnicas específicas para 3 años:</h4>
                            <ul>
                                <li><strong>Onomatopeyas:</strong> "El gato hace MIAU" con énfasis</li>
                                <li><strong>Preguntas cerradas:</strong> "¿Es un perro?" (sí/no)</li>
                                <li><strong>Completar frases:</strong> "El sol es..." (amarillo)</li>
                                <li><strong>Señalar partes:</strong> "¿Dónde están los ojos del oso?"</li>
                            </ul>
                            
                            <div class="demo-label">🎮 Práctica Interactiva</div>
                            <div class="game-container">
                                <h4>Cuento "Los Tres Cerditos" - Escoge la respuesta:</h4>
                                <p><strong>Pregunta:</strong> "¿Qué hace el lobo?" *Mostrando imagen del lobo soplando*</p>
                                <button onclick="checkStoryAnswer('sopla')" style="margin: 5px; padding: 10px; border-radius: 5px; border: none; background: #28a745; color: white;">
                                    💨 "Sopla" (Correcto para 3 años)
                                </button>
                                <button onclick="checkStoryAnswer('destruye')" style="margin: 5px; padding: 10px; border-radius: 5px; border: none; background: #dc3545; color: white;">
                                    🏚️ "Destruye las casas" (Muy complejo)
                                </button>
                                <div id="storyResult" style="margin-top: 10px; font-weight: bold;"></div>
                            </div>
                        `
                },
                {
                    icon: "🧩",
                    title: "Clasificación Simple",
                    description: "Separar objetos por colores, tamaños o formas básicas",
                    content: `
                        <div class="activity-instructions">
                            <h4>🎯 Objetivo:</h4>
                            <p>Desarrollar vocabulario de categorías básicas (colores, tamaños) y habilidades de clasificación lógica.</p>
                            
                            <h4>📋 Preparación:</h4>
                            <ul>
                                <li>Objetos rojos: manzana de juguete, auto rojo, bloque rojo</li>
                                <li>Objetos azules: pelota azul, libro azul, juguete azul</li>
                                <li>Dos recipientes o cajas etiquetadas con colores</li>
                            </ul>
                            
                            <h4>📋 Instrucciones paso a paso:</h4>
                            <div class="steps">
                                <div class="step">Muestra los objetos diciendo el color: "Mira, esto es ROJO"</div>
                                <div class="step">Modela la acción: "Los rojos van aquí" (pon uno en la caja roja)</div>
                                <div class="step">Da un objeto a tu hijo: "¿Dónde va el auto rojo?"</div>
                                <div class="step">Guía su mano si es necesario: "Sí, con los rojos"</div>
                                <div class="step">Celebra cada acierto: "¡Excelente! Rojo con rojo"</div>
                            </div>
                            
                            <div class="demo-label">🎮 Simulador de Clasificación</div>
                            <div class="game-container">
                                <h4>Ayuda al niño a clasificar - ¿Dónde va cada objeto?</h4>
                                <div style="display: flex; gap: 20px; margin: 20px 0;">
                                    <div style="border: 2px solid red; padding: 15px; border-radius: 10px; text-align: center;">
                                        <strong>CAJA ROJA</strong><br>
                                        <div id="redBox">🟥</div>
                                    </div>
                                    <div style="border: 2px solid blue; padding: 15px; border-radius: 10px; text-align: center;">
                                        <strong>CAJA AZUL</strong><br>
                                        <div id="blueBox">🟦</div>
                                    </div>
                                </div>
                                <p><strong>Objeto actual:</strong> <span id="currentObject">🍎 Manzana ROJA</span></p>
                                <button onclick="classifyObject('red')" style="margin: 5px; padding: 10px; border-radius: 5px; border: none; background: #dc3545; color: white;">
                                    Poner en caja ROJA
                                </button>
                                <button onclick="classifyObject('blue')" style="margin: 5px; padding: 10px; border-radius: 5px; border: none; background: #007bff; color: white;">
                                    Poner en caja AZUL
                                </button>
                                <div id="classifyResult" style="margin-top: 10px; font-weight: bold;"></div>
                            </div>
                        `
                },
                {
                    icon: "🎭",
                    title: "Imitación de Sonidos",
                    description: "Imitar sonidos de animales y objetos cotidianos",
                    content: `
                        <div class="activity-instructions">
                            <h4>🎯 Objetivo:</h4>
                            <p>Desarrollar habilidades de imitación vocal, articulación básica y asociación sonido-objeto.</p>
                            
                            <h4>📋 Instrucciones paso a paso:</h4>
                            <div class="steps">
                                <div class="step">Muestra la imagen del animal claramente</div>
                                <div class="step">Produce el sonido exageradamente: "El perro hace GUAU-GUAU"</div>
                                <div class="step">Espera 3 segundos para que tu hijo responda</div>
                                <div class="step">Si no imita, repite y muestra cómo se hace con la boca</div>
                                <div class="step">Acepta cualquier aproximación: "au-au" por "guau-guau"</div>
                            </div>
                            
                            <h4>🐾 Sonidos por nivel de dificultad (3 años):</h4>
                            <ul>
                                <li><strong>Fáciles:</strong> MUUU (vaca), MIAU (gato), AU-AU (perro)</li>
                                <li><strong>Intermedios:</strong> IIIH-AAA (caballo), CUAC (pato)</li>
                                <li><strong>Desafiantes:</strong> KIKIRIKI (gallo), BZZZZ (abeja)</li>
                            </ul>
                            
                            <div class="demo-label">🎮 Práctica de Sonidos</div>
                            <div class="game-container">
                                <h4>¿Qué sonido hace cada animal? Haz clic para escuchar:</h4>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                                    <button onclick="playAnimalSound('cow')" style="padding: 15px; border-radius: 10px; border: none; background: #28a745; color: white;">
                                        🐄<br>Vaca
                                    </button>
                                    <button onclick="playAnimalSound('cat')" style="padding: 15px; border-radius: 10px; border: none; background: #ffc107; color: black;">
                                        🐱<br>Gato
                                    </button>
                                    <button onclick="playAnimalSound('dog')" style="padding: 15px; border-radius: 10px; border: none; background: #17a2b8; color: white;">
                                        🐕<br>Perro
                                    </button>
                                </div>
                                <div id="soundResult" style="margin-top: 15px; padding: 10px; background: #f8f9fa; border-radius: 5px;"></div>
                            </div>
                        `
                },
                {
                    icon: "🤲",
                    title: "Juegos de Manos",
                    description: "Actividades de coordinación y ritmo con las manos",
                    content: `
                        <div class="activity-instructions">
                            <h4>🎯 Objetivo:</h4>
                            <p>Desarrollar coordinación motora fina, ritmo y habilidades pre-lingüísticas a través del movimiento.</p>
                            
                            <h4>📋 Preparación:</h4>
                            <ul>
                                <li>Espacio cómodo para sentarse frente a frente</li>
                                <li>Manos limpias y libres</li>
                                <li>Actitud relajada y juguetona</li>
                            </ul>
                            
                            <h4>📋 Instrucciones paso a paso:</h4>
                            <div class="steps">
                                <div class="step">Comienza con "Palmas Palmitas" despacio</div>
                                <div class="step">Exagera los movimientos para que sean fáciles de seguir</div>
                                <div class="step">Acompaña cada movimiento con la palabra correspondiente</div>
                                <div class="step">Si tu hijo se queda quieto, toma sus manos suavemente y ayúdalo</div>
                                <div class="step">Incrementa la velocidad gradualmente solo si el niño sigue el ritmo</div>
                            </div>
                            
                            <h4>👏 Secuencias para 3 años:</h4>
                            <ol>
                                <li><strong>"Palmas Palmitas":</strong> palmadas simples al ritmo</li>
                                <li><strong>"Tortillitas":</strong> frotar palmas en círculo</li>
                                <li><strong>"Cinco Lobitos":</strong> contar dedos uno por uno</li>
                            </ol>
                            
                            <div class="demo-label">🎮 Práctica de Coordinación</div>
                            <div class="game-container">
                                <h4>Sigue la secuencia de "Palmas Palmitas":</h4>
                                <div style="text-align: center; margin: 20px 0;">
                                    <button id="handGameBtn" onclick="startHandGame()" style="padding: 20px; border-radius: 15px; border: none; background: #007bff; color: white; font-size: 16px;">
                                        🤲 Comenzar Juego de Manos
                                    </button>
                                </div>
                                <div id="handGameSteps" style="display: none;">
                                    <div style="text-align: center; font-size: 18px; margin: 10px 0;">
                                        <div id="currentStep">👏 Paso 1: Palmas juntas</div>
                                    </div>
                                    <button onclick="nextHandStep()" style="padding: 10px 20px; border-radius: 10px; border: none; background: #28a745; color: white;">
                                        Siguiente Paso
                                    </button>
                                </div>
                                <div id="handGameResult" style="margin-top: 10px; font-weight: bold;"></div>
                            </div>
                        `
                }
            ],
            4: [
                {
                    icon: "🎨",
                    title: "Descripción de Dibujos",
                    description: "Describe lo que ves en imágenes con detalles simples",
                    content: `
                        <div class="activity-instructions">
                            <h4>🎯 Objetivo:</h4>
                            <p>Desarrollar vocabulario descriptivo, habilidades de observación y construcción de oraciones de 3-4 palabras.</p>
                            
                            <h4>📋 Instrucciones paso a paso:</h4>
                            <div class="steps">
                                <div class="step">Muestra una imagen con elementos claros y no muy complejos</div>
                                <div class="step">Comienza tú describiendo: "Veo un gato negro grande"</div>
                                <div class="step">Haz preguntas específicas: "¿De qué color es el gato?"</div>
                                <div class="step">Acepta respuestas de 1-2 palabras y expándelas: Si dice "negro", tú dices "Sí, es un gato negro"</div>
                                <div class="step">Introduce palabras nuevas gradualmente: "Este gato está dormido" (nuevo concepto)</div>
                            </div>
                            
                            <h4>🖼️ Tipos de imágenes recomendadas para 4 años:</h4>
                            <ul>
                                <li><strong>Animales en acción:</strong> perro corriendo, gato durmiendo</li>
                                <li><strong>Escenas familiares:</strong> cocina, parque, habitación</li>
                                <li><strong>Transportes:</strong> autos de diferentes colores, aviones</li>
                                <li><strong>Emociones:</strong> niños felices, tristes, sorprendidos</li>
                            </ul>
                            
                            <div class="demo-label">🎮 Práctica de Descripción</div>
                            <div class="game-container">
                                <h4>Describe esta imagen: 🐕🏃‍♂️🌳</h4>
                                <p><strong>Imagen:</strong> Un perro marrón corriendo hacia un árbol verde</p>
                                <p><strong>¿Qué pregunta harías para que el niño describa?</strong></p>
                                <button onclick="checkDescriptionQuestion('color')" style="margin: 5px; padding: 10px; border-radius: 5px; border: none; background: #28a745; color: white;">
                                    "¿De qué color es el perro?"
                                </button>
                                <button onclick="checkDescriptionQuestion('complex')" style="margin: 5px; padding: 10px; border-radius: 5px; border: none; background: #dc3545; color: white;">
                                    "¿Por qué crees que el perro corre hacia el árbol?"
                                </button>
                                <div id="descriptionResult" style="margin-top: 10px; font-weight: bold;"></div>
                            </div>
                        `
                },
                {
                    icon: "🔤",
                    title: "Rimas Básicas",
                    description: "Identificar y crear palabras que riman",
                    content: `
                        <div class="activity-instructions">
                            <h4>🎯 Objetivo:</h4>
                            <p>Desarrollar conciencia fonológica, base fundamental para la futura lectoescritura y expansión del vocabulario.</p>
                            
                            <h4>📋 Instrucciones paso a paso:</h4>
                            <div class="steps">
                                <div class="step">Comienza con palabras que riman claramente: "casa-masa"</div>
                                <div class="step">Exagera la pronunciación del final: "ca-SA, ma-SA"</div>
                                <div class="step">Usa objetos reales o imágenes para mostrar las palabras</div>
                                <div class="step">Haz que tu hijo complete: "Casa rima con..." (esperar "masa")</div>
                                <div class="step">Celebra los intentos aunque no sean perfectos</div>
                            </div>
                            
                            <h4>🎵 Familias de rimas para 4 años:</h4>
                            <ul>
                                <li><strong>-asa:</strong> casa, masa, pasa</li>
                                <li><strong>-ato:</strong> gato, pato, rato</li>
                                <li><strong>-ola:</strong> bola, cola, sola</li>
                                <li><strong>-ano:</strong> mano, piano, hermano</li>
                            </ul>
                            
                            <div class="demo-label">🎮 Juego de Rimas</div>
                            <div class="game-container">
                                <h4>¿Cuál de estas palabras rima con "GATO"?</h4>
                                <div style="display: flex; gap: 15px; justify-content: center; margin: 20px 0;">
                                    <button onclick="checkRhyme('pato')" style="padding: 15px; border-radius: 10px; border: none; background: #28a745; color: white;">
                                        🦆 PATO
                                    </button>
                                    <button onclick="checkRhyme('perro')" style="padding: 15px; border-radius: 10px; border: none; background: #dc3545; color: white;">
                                        🐕 PERRO
                                    </button>
                                    <button onclick="checkRhyme('casa')" style="padding: 15px; border-radius: 10px; border: none; background: #dc3545; color: white;">
                                        🏠 CASA
                                    </button>
                                </div>
                                <div id="rhymeResult" style="margin-top: 10px; font-weight: bold;"></div>
                            </div>
                        `
                },
                {
                    icon: "📞",
                    title: "Conversaciones Telefónicas",
                    description: "Simular llamadas para practicar diálogos",
                    content: `
                        <div class="activity-instructions">
                            <h4>🎯 Objetivo:</h4>
                            <p>Desarrollar habilidades conversacionales, turnos de habla y uso de fórmulas sociales básicas.</p>
                            
                            <h4>📋 Preparación:</h4>
                            <ul>
                                <li>Dos teléfonos de juguete o objetos que los simulen</li>
                                <li>Lista de temas simples para conversar</li>
                                <li>Ambiente relajado y sin distracciones</li>
                            </ul>
                            
                            <h4>📋 Instrucciones paso a paso:</h4>
                            <div class="steps">
                                <div class="step">Modela primero: "Ring ring! ¿Aló? Habla mamá"</div>
                                <div class="step">Enseña el saludo: "Hola, ¿cómo estás?"</div>
                                <div class="step">Haz preguntas simples: "¿Qué comiste hoy?"</div>
                                <div class="step">Espera la respuesta y responde apropiadamente</div>
                                <div class="step">Enseña la despedida: "Chau, nos vemos pronto"</div>
                            </div>
                            
                            <h4>📱 Guiones para conversaciones (4 años):</h4>
                            <ul>
                                <li><strong>Llamar a la abuela:</strong> "Hola abuela, ¿cómo estás? Te quiero mucho"</li>
                                <li><strong>Llamar a papá al trabajo:</strong> "Hola papá, ¿cuándo llegas a casa?"</li>
                                <li><strong>Llamar al doctor:</strong> "Doctor, me duele la pancita"</li>
                            </ul>
                            
                            <div class="demo-label">🎮 Simulador de Llamada</div>
                            <div class="game-container">
                                <h4>Practicemos una llamada a la abuela:</h4>
                                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 20px 0;">
                                    <div id="phoneConversation">
                                        <div style="margin: 10px 0;">
                                            <strong>📞 Ring ring...</strong>
                                        </div>
                                        <div style="margin: 10px 0;">
                                            <strong>Abuela:</strong> "¿Aló?"
                                        </div>
                                        <div style="margin: 10px 0;">
                                            <strong>Tu turno:</strong> ¿Qué dices?
                                        </div>
                                    </div>
                                    <button onclick="phoneResponse('hola')" style="margin: 5px; padding: 10px; border-radius: 5px; border: none; background: #28a745; color: white;">
                                        "Hola abuela, soy yo"
                                    </button>
                                    <button onclick="phoneResponse('quien')" style="margin: 5px; padding: 10px; border-radius: 5px; border: none; background: #ffc107; color: black;">
                                        "¿Quién habla?"
                                    </button>
                                </div>
                                <div id="phoneResult" style="margin-top: 10px; font-weight: bold;"></div>
                            </div>
                        `
                },
                {
                    icon: "🧮",
                    title: "Secuencias Lógicas",
                    description: "Ordenar eventos en secuencia temporal",
                    content: `
                        <div class="activity-instructions">
                            <h4>🎯 Objetivo:</h4>
                            <p>Desarrollar pensamiento lógico-temporal, vocabulario de secuencia y habilidades narrativas básicas.</p>
                            
                            <h4>📋 Instrucciones paso a paso:</h4>
                            <div class="steps">
                                <div class="step">Presenta 3 imágenes desordenadas de una secuencia conocida</div>
                                <div class="step">Modela el pensamiento: "¿Qué pasa primero?"</div>
                                <div class="step">Ayuda a identificar el primer paso: "Primero nos lavamos los dientes"</div>
                                <div class="step">Continúa con "después" y "al final"</div>
                                <div class="step">Cuenta la historia completa una vez ordenada</div>
                            </div>
                            
                            <h4>📊 Secuencias apropiadas para 4 años:</h4>
                            <ul>
                                <li><strong>Rutinas diarias:</strong> lavarse los dientes, vestirse, desayunar</li>
                                <li><strong>Crecimiento:</strong> semilla → planta → flor</li>
                                <li><strong>Cocinar:</strong> mezclar → hornear → comer</li>
                                <li><strong>Cuentos familiares:</strong> Los tres cerditos (casa de paja → madera → ladrillo)</li>
                            </ul>
                            
                            <div class="demo-label">🎮 Práctica de Secuencias</div>
                            <div class="game-container">
                                <h4>Ordena la secuencia: "Lavarse los dientes"</h4>
                                <div style="display: flex; gap: 15px; justify-content: center; margin: 20px 0;">
                                    <div style="border: 2px solid #ccc; padding: 15px; border-radius: 10px; text-align: center; background: white;">
                                        <div style="font-size: 30px;">🪥</div>
                                        <div>Cepillar</div>
                                    </div>
                                    <div style="border: 2px solid #ccc; padding: 15px; border-radius: 10px; text-align: center; background: white;">
                                        <div style="font-size: 30px;">🧴</div>
                                        <div>Pasta dental</div>
                                    </div>
                                    <div style="border: 2px solid #ccc; padding: 15px; border-radius: 10px; text-align: center; background: white;">
                                        <div style="font-size: 30px;">💧</div>
                                        <div>Enjuagar</div>
                                    </div>
                                </div>
                                <p><strong>¿Cuál va PRIMERO?</strong></p>
                                <button onclick="checkSequence('pasta')" style="margin: 5px; padding: 10px; border-radius: 5px; border: none; background: #28a745; color: white;">
                                    🧴 Poner pasta dental
                                </button>
                                <button onclick="checkSequence('cepillar')" style="margin: 5px; padding: 10px; border-radius: 5px; border: none; background: #dc3545; color: white;">
                                    🪥 Cepillar
                                </button>
                                <div id="sequenceResult" style="margin-top: 10px; font-weight: bold;"></div>
                            </div>
                        `
                },
                {
                    icon: "🎪",
                    title: "Teatro de Roles",
                    description: "Jugar a ser doctor, maestro, cocinero",
                    content: `
                        <div class="activity-instructions">
                            <h4>🎯 Objetivo:</h4>
                            <p>Desarrollar vocabulario específico por profesiones, habilidades sociales y expresión creativa.</p>
                            
                            <h4>📋 Preparación por rol:</h4>
                            <ul>
                                <li><strong>Doctor:</strong> estetoscopio de juguete, vendas, medicina de juguete</li>
                                <li><strong>Cocinero:</strong> utensilios de cocina, comida de juguete, delantal</li>
                                <li><strong>Maestro:</strong> pizarra pequeña, libros, lápices</li>
                            </ul>
                            
                            <h4>📋 Instrucciones paso a paso:</h4>
                            <div class="steps">
                                <div class="step">Elige un rol y explica: "Vamos a jugar al doctor"</div>
                                <div class="step">Modela el vocabulario específico: "El doctor usa estetoscopio"</div>
                                <div class="step">Crea una situación: "Tu muñeco está enfermo, ¿qué hacemos?"</div>
                                <div class="step">Guía con preguntas: "¿Cómo se siente? ¿Qué medicina necesita?"</div>
                                <div class="step">Intercambia roles: "Ahora tú eres el doctor y yo el paciente"</div>
                            </div>
                            
                            <div class="demo-label">🎮 Simulador de Roles</div>
                            <div class="game-container">
                                <h4>¡Juguemos al Doctor! 👩‍⚕️</h4>
                                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                                    <div id="rolePlayScenario">
                                        <strong>Situación:</strong> Tu osito de peluche tiene dolor de pancita
                                    </div>
                                    <div style="margin: 15px 0;">
                                        <strong>Doctor dice:</strong> "¿Qué le duele al osito?"
                                    </div>
                                    <p><strong>¿Qué respondes?</strong></p>
                                    <button onclick="rolePlayResponse('detailed')" style="margin: 5px; padding: 10px; border-radius: 5px; border: none; background: #28a745; color: white;">
                                        "Le duele la pancita" (apropiado)
                                    </button>
                                    <button onclick="rolePlayResponse('complex')" style="margin: 5px; padding: 10px; border-radius: 5px; border: none; background: #ffc107; color: black;">
                                        "Tiene gastroenteritis aguda" (muy complejo)
                                    </button>
                                </div>
                                <div id="rolePlayResult" style="margin-top: 10px; font-weight: bold;"></div>
                            </div>
                        `
                }
            ],
            5: [
                {
                    icon: "📝",
                    title: "Narración de Experiencias",
                    description: "Contar qué hiciste durante el día con detalles",
                    content: `
                        <div class="activity-instructions">
                            <h4>🎯 Objetivo:</h4>
                            <p>Desarrollar habilidades narrativas complejas, uso de tiempos verbales y organización temporal de eventos.</p>
                            
                            <h4>📋 Instrucciones paso a paso:</h4>
                            <div class="steps">
                                <div class="step">Establece un momento tranquilo, como antes de dormir</div>
                                <div class="step">Comienza con preguntas abiertas: "Cuéntame sobre tu día"</div>
                                <div class="step">Si se queda callado, ayuda: "¿Qué desayunaste esta mañana?"</div>
                                <div class="step">Expande sus respuestas: Si dice "jugué", pregunta "¿Con qué jugaste? ¿Con quién?"</div>
                                <div class="step">Introduce conectores: "Y después... Luego... Al final..."</div>
                            </div>
                            
                            <h4>🎯 Estrategias específicas para 5 años:</h4>
                            <ul>
                                <li><strong>Preguntas de seguimiento:</strong> "¿Cómo te sentiste cuando...?"</li>
                                <li><strong>Detalles sensoriales:</strong> "¿Qué viste/oliste/escuchaste?"</li>
                                <li><strong>Causa y efecto:</strong> "¿Por qué pasó eso? ¿Qué pasó después?"</li>
                                <li><strong>Emociones:</strong> "¿Te gustó? ¿Te dio miedo? ¿Te divirtió?"</li>
                            </ul>
                            
                            <div class="demo-label">🎮 Práctica de Narración</div>
                            <div class="game-container">
                                <h4>Ayuda a construir esta historia sobre "Un día en el parque":</h4>
                                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                                    <div id="storyProgress">
                                        <strong>Niño dice:</strong> "Fui al parque"
                                    </div>
                                    <p style="margin: 15px 0;"><strong>¿Qué pregunta harías para obtener más detalles?</strong></p>
                                    <button onclick="checkNarrationQuestion('what')" style="margin: 5px; padding: 10px; border-radius: 5px; border: none; background: #28a745; color: white;">
                                        "¿Qué hiciste en el parque?"
                                    </button>
                                    <button onclick="checkNarrationQuestion('when')" style="margin: 5px; padding: 10px; border-radius: 5px; border: none; background: #007bff; color: white;">
                                        "¿Cuándo fuiste al parque?"
                                    </button>
                                    <button onclick="checkNarrationQuestion('why')" style="margin: 5px; padding: 10px; border-radius: 5px; border: none; background: #ffc107; color: black;">
                                        "¿Por qué decidiste ir al parque?"
                                    </button>
                                </div>
                                <div id="narrationResult" style="margin-top: 10px; font-weight: bold;"></div>
                            </div>
                        `
                },
                {
                    icon: "🔍",
                    title: "Describir Diferencias",
                    description: "Encontrar diferencias entre dos imágenes similares",
                    content: `
                        <div class="activity-instructions">
                            <h4>🎯 Objetivo:</h4>
                            <p>Desarrollar vocabulario descriptivo detallado, atención visual y habilidades de comparación y contraste.</p>
                            
                            <h4>📋 Instrucciones paso a paso:</h4>
                            <div class="steps">
                                <div class="step">Presenta dos imágenes muy similares con 3-5 diferencias claras</div>
                                <div class="step">Modela el proceso: "En esta imagen veo un gato negro, en esta otro veo un gato blanco"</div>
                                <div class="step">Introduce vocabulario comparativo: "diferente", "igual", "parecido"</div>
                                <div class="step">Haz preguntas dirigidas: "¿Qué ves diferente en los sombreros?"</div>
                                <div class="step">Celebra cada diferencia encontrada: "¡Excelente observación!"</div>
                            </div>
                            
                            <h4>🔎 Tipos de diferencias apropiadas para 5 años:</h4>
                            <ul>
                                <li><strong>Colores:</strong> "El auto es rojo / El auto es azul"</li>
                                <li><strong>Cantidad:</strong> "Hay 3 flores / Hay 5 flores"</li>
                                <li><strong>Posición:</strong> "El perro está arriba / El perro está abajo"</li>
                                <li><strong>Presencia/ausencia:</strong> "Tiene sombrero / No tiene sombrero"</li>
                            </ul>
                            
                            <div class="demo-label">🎮 Juego de Diferencias</div>
                            <div class="game-container">
                                <h4>Encuentra las diferencias entre estas dos escenas de parque:</h4>
                                <div style="display: flex; gap: 20px; justify-content: center; margin: 20px 0;">
                                    <div style="border: 2px solid #007bff; padding: 15px; border-radius: 10px; text-align: center;">
                                        <strong>Imagen A</strong><br>
                                        🌳🐕☀️🚶‍♂️
                                        <br><small>Árbol, perro marrón, sol, persona caminando</small>
                                    </div>
                                    <div style="border: 2px solid #007bff; padding: 15px; border-radius: 10px; text-align: center;">
                                        <strong>Imagen B</strong><br>
                                        🌳🐕‍🦺🌧️🚶‍♀️
                                        <br><small>Árbol, perro negro, lluvia, persona caminando</small>
                                    </div>
                                </div>
                                <p><strong>¿Cuál es UNA diferencia que notas?</strong></p>
                                <button onclick="checkDifference('dog')" style="margin: 5px; padding: 10px; border-radius: 5px; border: none; background: #28a745; color: white;">
                                    El color del perro es diferente
                                </button>
                                <button onclick="checkDifference('weather')" style="margin: 5px; padding: 10px; border-radius: 5px; border: none; background: #28a745; color: white;">
                                    El clima es diferente (sol/lluvia)
                                </button>
                                <button onclick="checkDifference('tree')" style="margin: 5px; padding: 10px; border-radius: 5px; border: none; background: #dc3545; color: white;">
                                    El árbol es diferente
                                </button>
                                <div id="differenceResult" style="margin-top: 10px; font-weight: bold;"></div>
                            </div>
                        `
                },
                {
                    icon: "❓",
                    title: "Preguntas Abiertas",
                    description: "Hacer y responder preguntas con por qué y cómo",
                    content: `
                        <div class="activity-instructions">
                            <h4>🎯 Objetivo:</h4>
                            <p>Desarrollar pensamiento crítico, comprensión de causa-efecto y habilidades conversacionales avanzadas.</p>
                            
                            <h4>📋 Instrucciones paso a paso:</h4>
                            <div class="steps">
                                <div class="step">Comienza con situaciones familiares: "¿Por qué nos lavamos las manos?"</div>
                                <div class="step">Acepta respuestas simples y expándelas: "Sí, para no enfermarnos. ¿Qué más?"</div>
                                <div class="step">Modela el pensamiento: "Yo pienso que... ¿Y tú qué piensas?"</div>
                                <div class="step">Introduce "¿Cómo?" gradualmente: "¿Cómo crees que llega la lluvia?"</div>
                                <div class="step">Valida todas las respuestas: "Esa es una idea interesante"</div>
                            </div>
                            
                            <h4>❓ Progresión de preguntas para 5 años:</h4>
                            <ul>
                                <li><strong>Nivel 1:</strong> "¿Por qué dormimos?" (necesidades básicas)</li>
                                <li><strong>Nivel 2:</strong> "¿Por qué algunos animales vuelan?" (características)</li>
                                <li><strong>Nivel 3:</strong> "¿Cómo se hacen las nubes?" (procesos)</li>
                                <li><strong>Nivel 4:</strong> "¿Qué pasaría si no hubiera sol?" (hipótesis)</li>
                            </ul>
                            
                            <div class="demo-label">🎮 Práctica de Preguntas</div>
                            <div class="game-container">
                                <h4>Situación: Un niño ve que las plantas de su jardín están marchitas</h4>
                                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 20px 0;">
                                    <p><strong>El niño pregunta:</strong> "¿Por qué están tristes las plantas?"</p>
                                    <p><strong>¿Cuál es la mejor respuesta para estimular su pensamiento?</strong></p>
                                    <button onclick="checkOpenQuestion('simple')" style="margin: 5px; padding: 10px; border-radius: 5px; border: none; background: #ffc107; color: black;">
                                        "Porque no tienen agua"
                                    </button>
                                    <button onclick="checkOpenQuestion('expanded')" style="margin: 5px; padding: 10px; border-radius: 5px; border: none; background: #28a745; color: white;">
                                        "¿Qué crees que necesitan las plantas para estar felices?"
                                    </button>
                                    <button onclick="checkOpenQuestion('complex')" style="margin: 5px; padding: 10px; border-radius: 5px; border: none; background: #dc3545; color: white;">
                                        "Las plantas realizan fotosíntesis para..."
                                    </button>
                                </div>
                                <div id="openQuestionResult" style="margin-top: 10px; font-weight: bold;"></div>
                            </div>
                        `
                },
                {
                    icon: "📖",
                    title: "Crear Cuentos",
                    description: "Inventar historias cortas con principio, desarrollo y final",
                    content: `
                        <div class="activity-instructions">
                            <h4>🎯 Objetivo:</h4>
                            <p>Desarrollar creatividad, estructura narrativa y habilidades de planificación del discurso.</p>
                            
                            <h4>📋 Instrucciones paso a paso:</h4>
                            <div class="steps">
                                <div class="step">Proporciona un personaje: "Había una vez un ratón llamado Pepe"</div>
                                <div class="step">Pregunta sobre el escenario: "¿Dónde vivía Pepe?"</div>
                                <div class="step">Introduce un problema: "Un día Pepe tenía hambre, ¿qué hizo?"</div>
                                <div class="step">Guía la resolución: "¿Cómo resolvió Pepe su problema?"</div>
                                <div class="step">Termina con una conclusión: "¿Cómo terminó la historia de Pepe?"</div>
                            </div>
                            
                            <h4>📚 Estructura básica para cuentos de 5 años:</h4>
                            <ul>
                                <li><strong>Inicio:</strong> Personaje + lugar ("Había una vez... que vivía en...")</li>
                                <li><strong>Problema:</strong> Algo que debe resolver ("Un día...")</li>
                                <li><strong>Acción:</strong> Lo que hace el personaje ("Entonces...")</li>
                                <li><strong>Final:</strong> Cómo se resuelve ("Al final...")</li>
                            </ul>
                            
                            <div class="demo-label">🎮 Constructor de Cuentos</div>
                            <div class="game-container">
                                <h4>¡Vamos a crear un cuento juntos!</h4>
                                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                                    <div id="storyBuilder">
                                        <strong>Inicio del cuento:</strong><br>
                                        "Había una vez una mariposa llamada Luna que vivía en..."
                                    </div>
                                    <p style="margin: 15px 0;"><strong>¿Dónde continúas la historia?</strong></p>
                                    <button onclick="continueStory('garden')" style="margin: 5px; padding: 10px; border-radius: 5px; border: none; background: #28a745; color: white;">
                                        "...en un jardín lleno de flores"
                                    </button>
                                    <button onclick="continueStory('sky')" style="margin: 5px; padding: 10px; border-radius: 5px; border: none; background: #007bff; color: white;">
                                        "...en las nubes del cielo"
                                    </button>
                                    <button onclick="continueStory('house')" style="margin: 5px; padding: 10px; border-radius: 5px; border: none; background: #ffc107; color: black;">
                                        "...en una casa grande"
                                    </button>
                                </div>
                                <div id="storyResult" style="margin-top: 10px; font-weight: bold;"></div>
                            </div>
                        `
                },
                {
                    icon: "🎲",
                    title: "Juegos de Mesa Narrativos",
                    description: "Usar juegos para practicar descripción y narración",
                    content: `
                        <div class="activity-instructions">
                            <h4>🎯 Objetivo:</h4>
                            <p>Combinar diversión con desarrollo del lenguaje através de juegos estructurados que requieren comunicación.</p>
                            
                            <h4>📋 Preparación de juegos narrativos:</h4>
                            <ul>
                                <li><strong>Memoria descriptiva:</strong> Cartas con imágenes para describir</li>
                                <li><strong>Dados de historias:</strong> Dados con imágenes para crear cuentos</li>
                                <li><strong>¿Qué falta?:</strong> Objetos para identificar el ausente</li>
                            </ul>
                            
                            <h4>📋 Instrucciones paso a paso:</h4>
                            <div class="steps">
                                <div class="step">Explica las reglas claramente antes de empezar</div>
                                <div class="step">Modela el primer turno: "En mi carta veo un gato que come pescado"</div>
                                <div class="step">Anima descripciones completas: "¿Puedes decir más sobre el gato?"</div>
                                <div class="step">Celebra creatividad: "¡Qué historia tan interesante!"</div>
                                <div class="step">Deja que el niño gane algunas veces naturalmente</div>
                            </div>
                            
                            <h4>🎮 Variantes de juegos para 5 años:</h4>
                            <ul>
                                <li><strong>"Describe y adivina":</strong> Un jugador describe, otro adivina</li>
                                <li><strong>"Continúa la historia":</strong> Turnos para agregar una oración</li>
                                <li><strong>"¿Qué pasó después?":</strong> Predecir secuencias</li>
                            </ul>
                            
                            <div class="demo-label">🎮 Mini-juego: "Describe y Adivina"</div>
                            <div class="game-container">
                                <h4>Tu turno de describir - El niño debe adivinar qué animal es:</h4>
                                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                                    <div id="animalClues">
                                        <strong>Tus pistas son:</strong><br>
                                        "Es grande, gris, tiene trompa larga y orejas enormes"
                                    </div>
                                    <p style="margin: 15px 0;"><strong>¿Qué animal crees que es?</strong></p>
                                    <button onclick="guessAnimal('elephant')" style="margin: 5px; padding: 10px; border-radius: 5px; border: none; background: #28a745; color: white;">
                                        🐘 Elefante
                                    </button>
                                    <button onclick="guessAnimal('rhino')" style="margin: 5px; padding: 10px; border-radius: 5px; border: none; background: #dc3545; color: white;">
                                        🦏 Rinoceronte
                                    </button>
                                    <button onclick="guessAnimal('hippo')" style="margin: 5px; padding: 10px; border-radius: 5px; border: none; background: #ffc107; color: black;">
                                        🦛 Hipopótamo
                                    </button>
                                </div>
                                <div id="animalGuessResult" style="margin-top: 10px; font-weight: bold;"></div>
                            </div>
                        `
                }
            ]
        };

        // Funciones de interactividad para los juegos
        function playVerse(verseNumber) {
            const verses = {
                1: "Perfecto, exagera los movimientos de lavarse la cara",
                2: "Excelente, frotar las manos ayuda con la coordinación",
                3: "Muy bien, cerrar los ojos suavemente es ideal"
            };
            document.getElementById('verseResult').innerHTML = `<div style="color: #28a745;">✓ ${verses[verseNumber]}</div>`;
        }

        function checkStoryAnswer(answer) {
            const result = document.getElementById('storyResult');
            if (answer === 'sopla') {
                result.innerHTML = `<div style="color: #28a745;">✓ ¡Excelente! "Sopla" es perfecto para 3 años - simple y concreto.</div>`;
            } else {
                result.innerHTML = `<div style="color: #dc3545;">❌ Muy complejo para 3 años. Mejor usar palabras simples como "sopla".</div>`;
            }
        }

        function classifyObject(color) {
            const result = document.getElementById('classifyResult');
            if (color === 'red') {
                result.innerHTML = `<div style="color: #28a745;">✓ ¡Correcto! La manzana roja va con los rojos. ¡Excelente clasificación!</div>`;
                document.getElementById('currentObject').textContent = '🏀 Pelota AZUL';
            } else {
                result.innerHTML = `<div style="color: #dc3545;">❌ La manzana es ROJA, debe ir con los objetos rojos.</div>`;
            }
        }

        function playAnimalSound(animal) {
            const sounds = {
                cow: "¡MUUU! Excelente para trabajar el sonido 'M' con los labios cerrados.",
                cat: "¡MIAU! Perfecto para practicar sonidos nasales y vocales claras.",
                dog: "¡GUAU-GUAU! Ideal para fortalecer los labios con el sonido 'G'."
            };
            document.getElementById('soundResult').innerHTML = `<div style="color: #28a745;">${sounds[animal]}</div>`;
        }

        function startHandGame() {
            document.getElementById('handGameSteps').style.display = 'block';
            document.getElementById('handGameBtn').textContent = 'Juego en progreso...';
            document.getElementById('handGameBtn').disabled = true;
        }

        let handStep = 1;
        function nextHandStep() {
            const steps = [
                "👏 Paso 1: Palmas juntas",
                "🙌 Paso 2: Palmas separadas",
                "👏 Paso 3: Palmas juntas otra vez",
                "🎉 ¡Completado! Excelente coordinación"
            ];
            
            if (handStep < steps.length) {
                document.getElementById('currentStep').textContent = steps[handStep];
                handStep++;
            }
            
            if (handStep >= steps.length) {
                document.getElementById('handGameResult').innerHTML = `<div style="color: #28a745;">✓ ¡Perfecto! Has completado la secuencia de coordinación.</div>`;
            }
        }

        // Funciones para actividades de 4 años
        function checkDescriptionQuestion(type) {
            const result = document.getElementById('descriptionResult');
            if (type === 'color') {
                result.innerHTML = `<div style="color: #28a745;">✓ Perfecto para 4 años - pregunta específica y concreta.</div>`;
            } else {
                result.innerHTML = `<div style="color: #dc3545;">❌ Muy abstracto para 4 años. Mejor hacer preguntas concretas.</div>`;
            }
        }

        function checkRhyme(word) {
            const result = document.getElementById('rhymeResult');
            if (word === 'pato') {
                result.innerHTML = `<div style="color: #28a745;">✓ ¡Excelente! GATO y PATO riman perfectamente. Terminan igual: -ATO</div>`;
            } else {
                result.innerHTML = `<div style="color: #dc3545;">❌ No rima con GATO. Busca palabras que terminen en -ATO</div>`;
            }
        }

        function phoneResponse(type) {
            const result = document.getElementById('phoneResult');
            if (type === 'hola') {
                result.innerHTML = `<div style="color: #28a745;">✓ ¡Perfecto! Saludo apropiado para 4 años.</div>`;
            } else {
                result.innerHTML = `<div style="color: #ffc107;">Está bien, pero es mejor enseñar primero el saludo básico.</div>`;
            }
        }

        function checkSequence(step) {
            const result = document.getElementById('sequenceResult');
            if (step === 'pasta') {
                result.innerHTML = `<div style="color: #28a745;">✓ ¡Correcto! Primero va la pasta dental en el cepillo.</div>`;
            } else {
                result.innerHTML = `<div style="color: #dc3545;">❌ Primero necesitamos poner la pasta dental en el cepillo.</div>`;
            }
        }

        function rolePlayResponse(type) {
            const result = document.getElementById('rolePlayResult');
            if (type === 'detailed') {
                result.innerHTML = `<div style="color: #28a745;">✓ Perfecto para 4 años - descripción simple y clara.</div>`;
            } else {
                result.innerHTML = `<div style="color: #dc3545;">❌ Demasiado técnico para un niño de 4 años.</div>`;
            }
        }

        // Funciones para actividades de 5 años
        function checkNarrationQuestion(type) {
            const result = document.getElementById('narrationResult');
            if (type === 'what') {
                result.innerHTML = `<div style="color: #28a745;">✓ Excelente - pregunta abierta que estimula detalles específicos.</div>`;
            } else if (type === 'when') {
                result.innerHTML = `<div style="color: #007bff;">Buena pregunta, pero "qué hiciste" da más información narrativa.</div>`;
            } else {
                result.innerHTML = `<div style="color: #ffc107;">Muy abstracto para comenzar. Mejor preguntar sobre acciones concretas.</div>`;
            }
        }

        function checkDifference(type) {
            const result = document.getElementById('differenceResult');
            if (type === 'dog' || type === 'weather') {
                result.innerHTML = `<div style="color: #28a745;">✓ ¡Excelente observación! Has identificado una diferencia real.</div>`;
            } else {
                result.innerHTML = `<div style="color: #dc3545;">❌ El árbol es igual en ambas imágenes. Mira otros elementos.</div>`;
            }
        }

        function checkOpenQuestion(type) {
            const result = document.getElementById('openQuestionResult');
            if (type === 'expanded') {
                result.innerHTML = `<div style="color: #28a745;">✓ Excelente - estimula el pensamiento y permite múltiples respuestas.</div>`;
            } else if (type === 'simple') {
                result.innerHTML = `<div style="color: #ffc107;">Correcto pero cerrado. Mejor hacer preguntas que estimulen pensamiento.</div>`;
            } else {
                result.innerHTML = `<div style="color: #dc3545;">❌ Demasiado técnico para 5 años. Adapta el vocabulario.</div>`;
            }
        }

        function continueStory(location) {
            const result = document.getElementById('storyResult');
            const continuations = {
                garden: "¡Excelente elección! Un jardín permite muchas aventuras y personajes.",
                sky: "¡Muy creativo! Las nubes ofrecen un escenario fantástico.",
                house: "¡Interesante! Una casa puede tener muchos rincones por explorar."
            };
            result.innerHTML = `<div style="color: #28a745;">✓ ${continuations[location]}</div>`;
            
            // Actualizar la historia
            document.getElementById('storyBuilder').innerHTML = `
                <strong>Historia continuada:</strong><br>
                "Había una vez una mariposa llamada Luna que vivía ${location === 'garden' ? 'en un jardín lleno de flores' : location === 'sky' ? 'en las nubes del cielo' : 'en una casa grande'}. Un día Luna descubrió algo muy especial..."
            `;
        }

        function guessAnimal(animal) {
            const result = document.getElementById('animalGuessResult');
            if (animal === 'elephant') {
                result.innerHTML = `<div style="color: #28a745;">🎉 ¡CORRECTO! Es un elefante. Excelente deducción a partir de las pistas.</div>`;
            } else {
                result.innerHTML = `<div style="color: #dc3545;">❌ No es correcto. Piensa en el animal con trompa larga y orejas enormes.</div>`;
            }
        }

        // Inicialización y gestión de edad
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
            updateProgress();
            setupEvaluationListeners(); // Agregar configuración específica para evaluación
        });

        function setupEventListeners() {
            // Botones de edad
            document.querySelectorAll('.age-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    selectAge(parseInt(this.dataset.age));
                });
            });
        }

        function setupEvaluationListeners() {
            // Configurar listeners para evaluación con delegación de eventos
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('evaluation-option')) {
                    selectEvaluationOption(e.target);
                }
            });
        }

        function selectAge(age) {
            selectedAge = age;
            
            // Actualizar botones
            document.querySelectorAll('.age-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`.age-btn[data-age="${age}"]`).classList.add('active');
            
            // Cargar actividades
            loadActivitiesForAge(age);
            updateProgress();
        }

        function loadActivitiesForAge(age) {
            const grid = document.getElementById('activityGrid');
            grid.innerHTML = '';
            
            const activities = activitiesData[age] || [];
            
            activities.forEach((activity, index) => {
                const activityCard = document.createElement('div');
                activityCard.className = 'activity-card';
                activityCard.dataset.activityId = `${age}-${index}`;
                
                activityCard.innerHTML = `
                    <div class="activity-icon">${activity.icon}</div>
                    <h3 class="activity-title">${activity.title}</h3>
                    <p class="activity-description">${activity.description}</p>
                    <div class="home-activity-badge">🏠 PARA HACER EN CASA</div>
                `;
                
                activityCard.addEventListener('click', () => openActivityModal(activity, `${age}-${index}`));
                grid.appendChild(activityCard);
            });
        }

        function openActivityModal(activity, activityId) {
            document.getElementById('modalTitle').textContent = activity.title;
            document.getElementById('modalBody').innerHTML = activity.content;
            document.getElementById('activityModal').classList.add('show');
            
            // Marcar como completada
            if (!completedActivities.includes(activityId)) {
                completedActivities.push(activityId);
                markActivityCompleted(activityId);
                updateProgress();
            }
        }

        function closeModal() {
            document.getElementById('activityModal').classList.remove('show');
        }

        function markActivityCompleted(activityId) {
            const card = document.querySelector(`[data-activity-id="${activityId}"]`);
            if (card) {
                card.classList.add('completed');
            }
        }

        function updateProgress() {
            const totalActivities = selectedAge ? activitiesData[selectedAge].length : 0;
            const completed = completedActivities.length;
            const percentage = totalActivities > 0 ? (completed / totalActivities) * 100 : 0;
            
            document.getElementById('progressFill').style.width = percentage + '%';
            document.getElementById('progressText').textContent = 
                `${Math.round(percentage)}% completado • ${completed} de ${totalActivities} actividades realizadas`;
            
            // Mostrar evaluación final si todas las actividades están completas
            if (percentage === 100 && totalActivities > 0) {
                showFinalEvaluation();
            }
        }

        function showFinalEvaluation() {
            document.getElementById('finalEvaluation').classList.add('show');
            document.getElementById('moduleCompletion').textContent = "¡Completa la evaluación final para continuar!";
        }

        function selectEvaluationOption(option) {
            const question = option.dataset.question;
            const answer = option.dataset.answer;
            
            // Limpiar selecciones previas de esta pregunta
            document.querySelectorAll(`[data-question="${question}"]`).forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // Marcar como seleccionada
            option.classList.add('selected');
            
            // Guardar respuesta
            evaluationAnswers[question] = answer;
            
            // Verificar si todas las preguntas están respondidas
            const totalQuestions = 3;
            const answeredQuestions = Object.keys(evaluationAnswers).length;
            
            if (answeredQuestions === totalQuestions) {
                document.getElementById('evaluationSubmit').disabled = false;
            }
        }

        function submitEvaluation() {
            console.log('Enviando evaluación...', evaluationAnswers); // Debug
            
            // Verificar que se respondieron todas las preguntas
            const totalQuestions = 3;
            const answeredQuestions = Object.keys(evaluationAnswers).length;
            
            if (answeredQuestions < totalQuestions) {
                alert('Por favor responde todas las preguntas antes de continuar.');
                return;
            }
            
            // Verificar respuestas correctas (todas son la opción 'b')
            const correctAnswers = { '1': 'b', '2': 'b', '3': 'b' };
            let score = 0;
            
            for (let question in correctAnswers) {
                if (evaluationAnswers[question] === correctAnswers[question]) {
                    score++;
                }
            }
            
            console.log(`Puntuación: ${score}/${totalQuestions}`); // Debug
            
            // Mostrar resultado personalizado según puntuación
            const resultDiv = document.getElementById('evaluationResult');
            if (score === 3) {
                resultDiv.innerHTML = `
                    <h4>🎉 ¡Excelente! Puntuación perfecta (${score}/3)</h4>
                    <p>Has demostrado una comprensión completa de los conceptos del Módulo 3. Ahora puedes continuar al Módulo 4 donde aprenderás sobre dificultades comunes y su manejo.</p>
                `;
            } else if (score >= 2) {
                resultDiv.innerHTML = `
                    <h4>✅ ¡Muy bien! Puntuación: ${score}/3</h4>
                    <p>Has entendido bien los conceptos principales. Te recomendamos revisar las actividades antes de continuar al Módulo 4.</p>
                `;
            } else {
                resultDiv.innerHTML = `
                    <h4>📚 Puntuación: ${score}/3 - Te recomendamos revisar</h4>
                    <p>Es importante comprender bien estos conceptos antes de continuar. Revisa las actividades del módulo y vuelve a intentar.</p>
                `;
            }
            
            resultDiv.style.display = 'block';
            
            // Habilitar navegación al siguiente módulo (independientemente de la puntuación)
            const nextBtn = document.getElementById('nextModuleBtn');
            if (nextBtn) {
                nextBtn.style.display = 'inline-flex';
                console.log('Botón Módulo 4 mostrado'); // Debug
            } else {
                console.error('No se encontró el botón nextModuleBtn'); // Debug
            }
            
            // Actualizar mensaje de completación
            const completionDiv = document.getElementById('moduleCompletion');
            if (completionDiv) {
                completionDiv.innerHTML = `
                    <div style="color: #28a745; font-size: 1.1rem;">
                        🎉 ¡Módulo 3 completado exitosamente!<br>
                        <small style="color: #666;">Puntuación final: ${score}/3</small>
                    </div>
                `;
            }
            
            // Deshabilitar botón de evaluación
            const submitBtn = document.getElementById('evaluationSubmit');
            if (submitBtn) {
                submitBtn.disabled = true;
                submitBtn.textContent = "Evaluación Completada ✓";
                submitBtn.style.background = '#28a745';
            }
            
            // Scroll suave hacia el botón de navegación
            setTimeout(() => {
                nextBtn.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }, 500);
        }

        // Cerrar modal al hacer clic fuera
        document.getElementById('activityModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });
    </script>
</body>
</html>
